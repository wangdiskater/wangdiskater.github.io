<!DOCTYPE html>





<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.3.8">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.0">

<link rel="stylesheet" href="//fonts.proxy.ustclug.org/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.4.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":true},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="上周末又开始做项目了，环境搭建，还有人员的加入，等等，总结是一定不能落下的，今天就把上周的总结补上。时间总是不够，一定要抓紧时间学习。星期一（9月23）1 Mybatis入门案例2&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt; &amp;lt;!DOCTYPE mapper         PUBLIC &amp;quot;-//">
<meta property="og:type" content="article">
<meta property="og:title" content="Java总结（十四）">
<meta property="og:url" content="http://yoursite.com/2019/10/03/Java总结（十四）/index.html">
<meta property="og:site_name" content="路要坚持">
<meta property="og:description" content="上周末又开始做项目了，环境搭建，还有人员的加入，等等，总结是一定不能落下的，今天就把上周的总结补上。时间总是不够，一定要抓紧时间学习。星期一（9月23）1 Mybatis入门案例2&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt; &amp;lt;!DOCTYPE mapper         PUBLIC &amp;quot;-//">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://s2.ax1x.com/2019/10/03/uw2NnS.png">
<meta property="og:updated_time" content="2019-10-03T04:32:44.890Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java总结（十四）">
<meta name="twitter:description" content="上周末又开始做项目了，环境搭建，还有人员的加入，等等，总结是一定不能落下的，今天就把上周的总结补上。时间总是不够，一定要抓紧时间学习。星期一（9月23）1 Mybatis入门案例2&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; ?&amp;gt; &amp;lt;!DOCTYPE mapper         PUBLIC &amp;quot;-//">
<meta name="twitter:image" content="https://s2.ax1x.com/2019/10/03/uw2NnS.png">
  <link rel="canonical" href="http://yoursite.com/2019/10/03/Java总结（十四）/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Java总结（十四） | 路要坚持</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
  <div class="container use-motion">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">路要坚持</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
      <article itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block post">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/03/Java总结（十四）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王邸">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/head.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="路要坚持">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Java总结（十四）

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-10-03 12:32:41 / 修改时间：12:32:44" itemprop="dateCreated datePublished" datetime="2019-10-03T12:32:41+08:00">2019-10-03</time>
            </span>
          
            

            
          

          
            <span id="/2019/10/03/Java总结（十四）/" class="post-meta-item leancloud_visitors" data-flag-title="Java总结（十四）" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/10/03/Java总结（十四）/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2019/10/03/Java总结（十四）/" itemprop="commentCount"></span></a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>上周末又开始做项目了，环境搭建，还有人员的加入，等等，总结是一定不能落下的，今天就把上周的总结补上。时间总是不够，一定要抓紧时间学习。</p><h2 id="星期一（9月23）"><a href="#星期一（9月23）" class="headerlink" title="星期一（9月23）"></a>星期一（9月23）</h2><h3 id="1-Mybatis入门案例2"><a href="#1-Mybatis入门案例2" class="headerlink" title="1 Mybatis入门案例2"></a>1 Mybatis入门案例2</h3><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;!--namespace要等于接口的全类名--&gt;
&lt;mapper namespace=&quot;com.cskaoyan.mapper.UserMapper&quot;&gt;
  &lt;select id=&quot;queryUserById&quot; resultType=&quot;com.cskaoyan.bean.User&quot;&gt;
    select id,username,password,age,gender from j16_user_t where id = #{id}
  &lt;/select&gt;
&lt;/mapper&gt;
public interface UserMapper {
    User queryUserById(int id);
}
</code></pre><a id="more"></a>
<p>写单元测试的时候，可以直接通过SqlSession获得dao层接口(Mapper)的实例获得的是代理的对象</p>
<pre><code>/**
 * 获得mapper的实例
 */
@Test
public void mytest1(){
  sqlSession = sqlSessionFactory.openSession();
  UserMapper mapper = sqlSession.getMapper(UserMapper.class);//mapper是代理对象
  User user = mapper.queryUserById(1);
  System.out.println(user);
}
</code></pre><h3 id="2-Mybatis配置文件"><a href="#2-Mybatis配置文件" class="headerlink" title="2 Mybatis配置文件"></a>2 Mybatis配置文件</h3><p><strong>2.1 Properties</strong></p>
<pre><code>&lt;properties resource=&quot;db.properties&quot;&gt;
    &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/j16_db?useUnicode=true&amp;amp;characterEncoding=utf-8&quot;/&gt;
&lt;/properties&gt;
</code></pre><p><strong>2.2 Setting</strong><br>缓存<br>懒加载→多表查询（后面说，也不会用）</p>
<p><strong>2.3 typeAliases（别名→小名）</strong><br>com.cskaoyan.bean.User→user，一般不使用。这里设置了，在mapper.xml中的就不需要写全类名。</p>
<pre><code>&lt;typeAliases&gt;
    &lt;!--&lt;typeAlias type=&quot;com.cskaoyan.bean.User&quot; alias=&quot;userz&quot;/&gt;--&gt;
    &lt;!--别名是类名的小写形式 user car UserDetail userdetail--&gt;
    &lt;package name=&quot;com.cskaoyan.bean&quot;/&gt;
&lt;/typeAliases&gt;
</code></pre><p>resultType就直接写user就好了，但是一般不使用</p>
<pre><code>&lt;select id=&quot;queryUserById&quot; resultType=&quot;user&quot;&gt;
    select id,username,password,age,gender from j16_user_t where id = #{id}
&lt;/select&gt;
</code></pre><p>resultType、parameterType（不写）<br><strong>2.4 typeHandler（类型转换）</strong><br>（略）<br><strong>2.5 plugins(插件)</strong><br>pageHelper分页的插件</p>
<p><strong>2.6 mappers的配置</strong><br>四种设置:配置扫描映射文件（3+1）</p>
<pre><code>&lt;!--mybatis的映射文件 sql和代码进行分离--&gt;
&lt;mappers&gt;
    &lt;!--相对于classpath下的映射文件的路径--&gt;
    &lt;mapper resource=&quot;com/cskaoyan/mapper/UserMapper.xml&quot;/&gt;
    &lt;!--class→对应接口的全类名--&gt;
    &lt;mapper class=&quot;com.cskaoyan.mapper.UserMapper&quot;/&gt;
    &lt;!--url--&gt;
    &lt;mapper url=&quot;file:\\\D:\Coding Workspace\j16_workspace\codes\mybatis_day2\demo1_mapper\src\main\resources\com\cskaoyan\mapper\UserMapper.xml&quot;/&gt;
    &lt;!--使用扫描包的实行加载映射文件--&gt;
    &lt;package name=&quot;com.cskaoyan.mapper&quot;/&gt;   &lt;!--使用的配置--&gt;
&lt;/mappers&gt;
</code></pre><h3 id="log4j"><a href="#log4j" class="headerlink" title="log4j"></a>log4j</h3><p>在正式说怎么用mybaits之前先来学一下日志的使用：<br><strong>1、导包</strong><br>必不可少的</p>
<pre><code>&lt;!--log4j--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;log4j&lt;/groupId&gt;
    &lt;artifactId&gt;log4j&lt;/artifactId&gt;
    &lt;version&gt;1.2.17&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><p><strong>2、引入日志的配置文件</strong><br>这里给一个我用的配置文件</p>
<pre><code>#Appender
#org.apache.log4j.ConsoleAppender（控制台）
#org.apache.log4j.FileAppender（文件）
#org.apache.log4j.DailyRollingFileAppender（每天产生一个日志文件）
#org.apache.log4j.RollingFileAppender（文件大小到达指定尺寸的时候产生一个新的文件）
#org.apache.log4j.WriterAppender（将日志信息以流格式发送到任意指定的地方）
### direct log messages to stdout ###
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{6}:%L - %m%n

### direct messages to file hibernate.log ###
log4j.appender.file=org.apache.log4j.FileAppender
log4j.appender.file.File=D://16mybatis.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

#org.apache.log4j.HTMLLayout（以HTML表格形式布局）
#org.apache.log4j.PatternLayout（可以灵活地指定布局模式）
#org.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串）
#org.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别等信息）
log4j.appender.file2 = org.apache.log4j.FileAppender
log4j.appender.file2.File=D://file2.log
log4j.appender.file2.layout=org.apache.log4j.TTCCLayout
#log4j.appender.file2.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

### DEBUG、INFO、WARN、ERROR和FATAL
#日志级别+输出appender
log4j.rootLogger=debug ,file,stdout,file2
</code></pre><h3 id="简单说明"><a href="#简单说明" class="headerlink" title="简单说明"></a>简单说明</h3><p>1.<strong>Appender</strong> 相当于你要去定义的日志附加器。然后后面跟名字例如:</p>
<pre><code>log4j.appender.stdout=org.apache.log4j.ConsoleAppender
</code></pre><p>stdout就是他的名字。后面的就是一些配置。可以看上面的注释</p>
<h3 id="日志级别"><a href="#日志级别" class="headerlink" title="日志级别"></a>日志级别</h3><p>日志一共有五个级别：debug info warm error fatal<br>debug的信息是最多的，fatal的信息是最少的。<br>当我们设置日志级别是debug时候，五级的日志都会输出数来。<br>这里也写一个了一个小工具把日志分离出来。</p>
<h3 id="日志格式（针对的是自定义日志PatternLayout）"><a href="#日志格式（针对的是自定义日志PatternLayout）" class="headerlink" title="日志格式（针对的是自定义日志PatternLayout）"></a>日志格式（针对的是自定义日志PatternLayout）</h3><p>%d 日期（date）ABSOLUTE(这是一个格式名)<br>%5p 优先级（privilege）5代表使用5个占位符<br>%c{1}+方法名 顺序从后往前取<br>%L 行号<br>%m 消息 输出的日志信息<br>%n 换行</p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><pre><code>Logger logger = Logger.getLogger(this.getClass());
logger.debug(user);
logger.info(user);
logger.warn(user);
logger.error(user);
logger.fatal(user);
</code></pre><h3 id="日志分离小工具"><a href="#日志分离小工具" class="headerlink" title="日志分离小工具"></a>日志分离小工具</h3><p>把之前的加强了一下，而且考虑了一下输出乱码的问题。<br>读入的时候考虑使用UTF-8读入数据。<br>写出的时候，使用GBK写出方便文本编辑器查看。<br>其实GBK写出的原因是：</p>
<p>我用<strong>IDEA运行</strong>代码，写出的编码格式是<strong>UTF-8</strong>，在notepad++打开生成的文件是没有乱码的，当然notepad++编码是utf-8编码<br>但是如果我<strong>命令行直接执行代码</strong>生成的文件有部分是中文乱码的，这是真的好奇怪。<br>目前解决办法是：<br>1.如果用IDEA执行，就用<strong>UTF-8写出</strong><br>2.如果用命令行执行，就用<strong>GBK写出</strong></p>
<p>我猜想是命令行执行写出操作是UTF-8格式的时候肯定有问题。<br>然后看到代码我发现一个问题：我只设置了写出的字符串的编码，而没有写writer的编码！<strong>我猜这就是问题的所在！</strong></p>
<pre><code>// writerInfo.write(new String(lineContent.getBytes(&quot;UTF-8&quot;)));
// writerInfo.write(new String(lineContent.getBytes(&quot;GBK&quot;)));
</code></pre><p>就是这里写入的时候设置了编码。但是对于Writer我们并没有设置。在命令行就出事了！我们必须要像读入的时候一样，通过输出转换流，来设置writer的编码格式：</p>
<pre><code>FileOutputStream fileOutputStream = new FileOutputStream(info);
OutputStreamWriter outputStreamWriter = new OutputStreamWriter(fileOutputStream,&quot;UTF-8&quot;);
BufferedWriter writerInfo = new BufferedWriter(outputStreamWriter);
</code></pre><p>最后的代码是这样：</p>
<pre><code>/**
 * 用法：
 * 输入一个路径，
 * 如果这个路径是文件，那么就直接给你分解成五个文件，分别存放debug info warn error fatal的信息
 * 如果这个路径是文件夹，防止有写错路径问题，没有写迭代去递归查找所有子文件夹的log，只查找了当前文件夹下的log
 *
 */
//优化升级，找到目录下的所有log进行分发
public class FilterInfoLog {
    public static void main(String[] args) throws IOException {
        Scanner scanner = new Scanner(System.in);
        System.out.println(&quot;请输入要转换的日志路径&quot;);
        String fileName = scanner.nextLine();
        String parentPath =&quot;&quot;;
        //第二步找到所有.log结尾的文件，就在当前目录
        List&lt;File&gt; fileList = new ArrayList&lt;&gt;();
        File file = new File(fileName);
        if (!file.exists()){
            return;
        }
        //如果输入的就是文件那么直接安排
        if(file.isFile()){
            fileList.add(file);
            parentPath = file.getParent();
        } else {
            //如果是文件夹则找出所有.log的文件
            parentPath = fileName;
            File[] files = file.listFiles();
            for (File innerFile : files) {
                if(innerFile.getName().endsWith(&quot;.log&quot;)){
                    fileList.add(innerFile);
                }
            }
        }
        BufferedWriter writerDebug = getWriter(parentPath + &quot;/log/debug.txt&quot;);
        BufferedWriter writerInfo = getWriter(parentPath + &quot;/log/info.txt&quot;);
        BufferedWriter writerWarn = getWriter(parentPath + &quot;/log/warn.txt&quot;);
        BufferedWriter writerError = getWriter(parentPath + &quot;/log/error.txt&quot;);
        BufferedWriter writerFatal = getWriter(parentPath + &quot;/log/fatal.txt&quot;);
        //太乱了，还是全部写在一个文件夹好了
        for (File inner : fileList) {
            //读取--读入是UTF-8编码（idea输出时候就是UTF-8的）
            FileInputStream fileInputStream = new FileInputStream(inner);
            InputStreamReader inputStreamReader = new InputStreamReader(fileInputStream,&quot;UTF-8&quot;);
            BufferedReader reader = new BufferedReader(inputStreamReader);
            String lineContent = null;

            //为了整洁
            //开头都写一个文件名
            writerDebug.write(inner.getName());
            writerInfo.write(inner.getName());
            writerWarn.write(inner.getName());
            writerError.write(inner.getName());
            writerFatal.write(inner.getName());
            //多写一个空行
            writerDebug.newLine();
            writerInfo.newLine();
            writerWarn.newLine();
            writerError.newLine();
            writerFatal.newLine();

            while ((lineContent = reader.readLine()) != null){

                //写入debug
                if (lineContent.contains(&quot;DEBUG&quot;)){
                    writerDebug.write(lineContent);
                    writerDebug.newLine();
                //写入info
                } else if (lineContent.contains(&quot;INFO&quot;)){
                    //这里不需要设置了
                    // writerInfo.write(new String(lineContent.getBytes(&quot;UTF-8&quot;)));
                    // writerInfo.write(new String(lineContent.getBytes(&quot;GBK&quot;)));
                    writerInfo.write(lineContent);
                    writerInfo.newLine();
                //写入warn
                } else if (lineContent.contains(&quot;WARN&quot;)){
                    writerWarn.write(lineContent);
                    writerWarn.newLine();
                //写入error
                } else if (lineContent.contains(&quot;ERROR&quot;)){
                    writerError.write(lineContent);
                    writerError.newLine();
                //写入fatal
                } else if (lineContent.contains(&quot;FATAL&quot;)){
                    writerFatal.write(lineContent);
                    writerFatal.newLine();
                }
            }

            //写完一个文件多写一个空行
            writerDebug.newLine();
            writerInfo.newLine();
            writerWarn.newLine();
            writerError.newLine();
            writerFatal.newLine();

            if (reader != null){
                reader.close();
            }
        }
        writerClose(writerDebug);
        writerClose(writerInfo);
        writerClose(writerWarn);
        writerClose(writerError);
        writerClose(writerFatal);
        System.out.println(&quot;success!&quot;);
    }


    private static void writerClose(BufferedWriter writer) throws IOException {
        if (writer != null){
            writer.close();
        }
    }

    //获取能写出UTF-8的缓冲字符输出流
    private static BufferedWriter getWriter(String fileName) throws UnsupportedEncodingException,
            FileNotFoundException {
        System.out.println(fileName);
        File file = new File(fileName);
        FileOutputStream fileOutputStream = new FileOutputStream(file);
        OutputStreamWriter outputStreamWriter = new OutputStreamWriter(fileOutputStream,&quot;UTF-8&quot;);
        BufferedWriter writer = new BufferedWriter(outputStreamWriter);
        return writer;
    }
}
</code></pre><h3 id="输入映射（重点）"><a href="#输入映射（重点）" class="headerlink" title="输入映射（重点）"></a>输入映射（重点）</h3><p>接口的参数</p>
<h3 id="4-1-没有注解"><a href="#4-1-没有注解" class="headerlink" title="4.1 没有注解"></a>4.1 没有注解</h3><p><strong>4.1.1   基本类型</strong></p>
<pre><code>User queryUserById(int id);

&lt;select id=&quot;queryUserById&quot; resultType=&quot;com.cskaoyan.bean.User&quot;&gt;
    select id,username,password,age,gender from j16_user_t where id = #{id}
&lt;/select&gt;
</code></pre><p><strong>4.1.2   Javabean</strong></p>
<pre><code>int insertUser(User user);

&lt;insert id=&quot;insertUser&quot; &gt;
    insert into j16_user_t (username,password,age,gender) values (#{username},#{password},#{age},#{gender})
&lt;/insert&gt;
</code></pre><p><strong>4.1.3   Map</strong></p>
<pre><code>/*map*/
User queryUserByMultiCondition(Map map);

&lt;!--无注解map--&gt;
&lt;select id=&quot;queryUserByMultiCondition&quot; resultType=&quot;com.cskaoyan.bean.User&quot;&gt;
    select id,username,password,age,gender from j16_user_t where
    username = #{username}
    and password = #{password}
    and age = #{age}
    and gender = #{user.gender}
&lt;/select&gt;
</code></pre><p><strong>4.1.4多个参数(必须要会)</strong></p>
<pre><code>/*多个参数*/
User queryUserByUsernameAndPassword(String username,String password);

&lt;!--无注解多个参数--&gt;
&lt;select id=&quot;queryUserByUsernameAndPassword&quot; resultType=&quot;com.cskaoyan.bean.User&quot;&gt;
    select id,username,password,age,gender from j16_user_t where
    username = #{param1}
    and password = #{param2}
&lt;/select&gt;
</code></pre><p>可以写param从1开始，或者写arg从0开始。可以混合使用，但是太乱了，所以才出现注解让参数更统一</p>
<pre><code>/*多个参数 混合类型*/
User queryUserByMultiType(String username,int age,User user,Map map);
&lt;!--无注解 多个混合类型参数--&gt;
&lt;select id=&quot;queryUserByMultiType&quot; resultType=&quot;com.cskaoyan.bean.User&quot;&gt;
    select id,username,password,age,gender from j16_user_t where
    username = #{param1}
    and age = #{param2}
    and gender = #{param3.gender}
    and password = #{param4.password}
&lt;/select&gt;
</code></pre><p>测试</p>
<pre><code>/**
 * username、age、user提供的gender
 */
@Test
public void mytest6() {
    sqlSession = sqlSessionFactory.openSession();
    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);
    User user = new User();
    user.setGender(&quot;male&quot;);
    HashMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();
    map.put(&quot;password&quot;,&quot;123456&quot;);
    User user1 = userMapper.queryUserByMultiType(&quot;lanzhao&quot;, 6, user, map);
    logger.info(user1);
}
</code></pre><p><strong>4.1.5   List或数组（讲sql标签的时候补充这一部分）需要使用foreach标签</strong></p>
<h3 id="4-2-使用注解来输入映射"><a href="#4-2-使用注解来输入映射" class="headerlink" title="4.2 使用注解来输入映射"></a>4.2 使用注解来输入映射</h3><p>@Param 出现在dao层，在方法对应的参数前,一句话概括：<br><strong><em>可见即可用，你在@Param注解中写了什么，你在映射文件中就可以用什么</em></strong></p>
<pre><code>/*有注解*/
/*基本类型*/
/*可见即可用，你在@Param注解中写了什么，你在映射文件中就可以用什么*/
User queryUserByUsernameAnnotation(@Param(&quot;usernamez&quot;) String username);
/*javabean*/
int insertUserAnnotation(@Param(&quot;usera&quot;) User user);
/*map*/
User queryUserByMultiConditionAnnotation(@Param(&quot;mapb&quot;) Map map);
/*多个参数*/
User queryUserByUsernameAndPasswordAnnotation(String username,String password);
/*多个参数使用arg*/
User queryUserByUsernameAndPassword2Annotation(String username,String password);
/*多个参数 混合类型*/
User queryUserByMultiTypeAnnotation(@Param(&quot;usernamea&quot;) String username,
                                    @Param(&quot;ageb&quot;) int age,
                                    @Param(&quot;userc&quot;) User user,
                                    @Param(&quot;mapd&quot;) Map map);
</code></pre><h3 id="5-输出映射（重点）"><a href="#5-输出映射（重点）" class="headerlink" title="5.输出映射（重点）"></a>5.输出映射（重点）</h3><p>返回值类型,就属于输出映射</p>
<h3 id="5-1-简单类型"><a href="#5-1-简单类型" class="headerlink" title="5.1 简单类型"></a>5.1 简单类型</h3><pre><code>/*基本类型*/
String queryUsernameById(@Param(&quot;id&quot;) int id);

&lt;select id=&quot;queryUsernameById&quot; resultType=&quot;string&quot;&gt;
    select username from j16_user_t where id = #{id}
&lt;/select&gt;
</code></pre><h3 id="5-2-Pojo类型"><a href="#5-2-Pojo类型" class="headerlink" title="5.2 Pojo类型"></a>5.2 Pojo类型</h3><p>resultType就是对应bean接收</p>
<pre><code>&lt;!--javabean--&gt;
&lt;!--查询结果的列名（而不是表的列名）和javabean的成员变量名对应--&gt;
&lt;select id=&quot;queryUserzById&quot; resultType=&quot;com.cskaoyan.bean.User&quot;&gt;
    select id as ida,username as usernameb,password as passwordc,age as aged,gender as gendere from j16_user_t where  id = #{id}
&lt;/select&gt;

/*javabean*/
Userz queryUserzById(@Param(&quot;id&quot;) int id);
</code></pre><h3 id="5-3-List或者数组"><a href="#5-3-List或者数组" class="headerlink" title="5.3 List或者数组"></a>5.3 List或者数组</h3><p><strong>5.3.1   基本类型 list或array</strong><br>resultType写的是里面单调数据的类型</p>
<pre><code>/*list*/
List&lt;Integer&gt; queryListIdsByName(@Param(&quot;username&quot;)String username);
/*array*/
int[] queryArrayIdsByName(@Param(&quot;username&quot;)String username);

&lt;select id=&quot;queryListIdsByName&quot; resultType=&quot;int&quot;&gt;
    select id from j16_user_t where username = #{username}
&lt;/select&gt;
&lt;select id=&quot;queryArrayIdsByName&quot; resultType=&quot;int&quot;&gt;
    select id from j16_user_t where username = #{username}
&lt;/select&gt;
</code></pre><p><strong>5.3.2   Javabean list或array</strong></p>
<pre><code>List&lt;User&gt; queryUserListByUsername(@Param(&quot;username&quot;)String username);
Userz[] queryUserzArrayByUsername(@Param(&quot;username&quot;)String username);

&lt;select id=&quot;queryUserListByUsername&quot; resultType=&quot;com.cskaoyan.bean.User&quot;&gt;
    select id,username,password,age,gender from j16_user_t where username = #{username}
&lt;/select&gt;
</code></pre><p>查询结果要和Userz的成员变量对应，这里就相当于默认需要column = property。（<strong>查询结果等于成员变量</strong>）<br>如果不等就是下面这种情况，需要设置别名</p>
<pre><code>&lt;select id=&quot;queryUserzArrayByUsername&quot; resultType=&quot;com.cskaoyan.bean.Userz&quot;&gt;
    select id as ida,username as usernameb ,password as passwordc ,
    age as aged,gender as gendere from j16_user_t where username = #{username}
&lt;/select&gt;
</code></pre><h3 id="5-4-resultMap"><a href="#5-4-resultMap" class="headerlink" title="5.4 resultMap"></a>5.4 resultMap</h3><pre><code>Userz queryUserzByIdResultMap(@Param(&quot;id&quot;) int id);


&lt;!--resultMap--&gt;
&lt;resultMap id=&quot;userzMap&quot; type=&quot;com.cskaoyan.bean.Userz&quot;&gt;
    &lt;result column=&quot;idz&quot; property=&quot;ida&quot;/&gt;&lt;!--colomn填的是查询结果的列名 property 对应type类型的成员变量名--&gt;
    &lt;result column=&quot;username&quot; property=&quot;usernameb&quot;/&gt;
    &lt;result column=&quot;password&quot; property=&quot;passwordc&quot;/&gt;
    &lt;result column=&quot;age&quot; property=&quot;aged&quot;/&gt;
    &lt;result column=&quot;gender&quot; property=&quot;gendere&quot;/&gt;
&lt;/resultMap&gt;
&lt;select id=&quot;queryUserzByIdResultMap&quot; resultMap=&quot;userzMap&quot;&gt;
    select id as idz,username,password,age,gender from j16_user_t where id = #{id}
&lt;/select&gt;
</code></pre><p>输出结果的封装，将查询结果的列名和javabean的成员变量名建立联系</p>
<h2 id="星期二（9月24）"><a href="#星期二（9月24）" class="headerlink" title="星期二（9月24）"></a>星期二（9月24）</h2><h3 id="Sql标签以及动态sql"><a href="#Sql标签以及动态sql" class="headerlink" title="Sql标签以及动态sql"></a>Sql标签以及动态sql</h3><h3 id="1-1-Where标签"><a href="#1-1-Where标签" class="headerlink" title="1.1 Where标签"></a>1.1 Where标签</h3><p>成对存在，两个标签之间放条件</p>
<pre><code>&lt;select id=&quot;queryUserByUsername&quot; resultType=&quot;com.cskaoyan.bean.User&quot;&gt;
    select id,username,password,age,gender from j16_user_t
    &lt;where&gt;
        username= #{username}
    &lt;/where&gt;
&lt;/select&gt;
</code></pre><p>单独使用没什么意思，一般配合If标签使用</p>
<h3 id="1-2-If"><a href="#1-2-If" class="headerlink" title="1.2 If"></a>1.2 If</h3><pre><code>&lt;!--test中--&gt;
&lt;select id=&quot;queryUserByUsernameAndPassword&quot; resultType=&quot;com.cskaoyan.bean.User&quot;&gt;
    select id,username,password,age,gender from j16_user_t
    &lt;where&gt;
        &lt;if test=&quot;usernamea != null and usernamea != &apos;&apos;&quot;&gt;
           and username = #{usernamea}
        &lt;/if&gt;
        &lt;if test=&quot;password != null&quot; and usernamea != &apos;&apos;&quot;&gt;
           and  password = #{password}
        &lt;/if&gt;
    &lt;/where&gt;
&lt;/select&gt;
</code></pre><p>从这可以看出，Where标签可以帮我们去掉他紧跟着的第一个关系词（多余的AND 或者 多余的OR）<br>当我们需要写一些判断条件的时候，在if的 test属性中可以添加一些简单的判断：（我是觉得除了== ！= 其他直接写sql语句不写标签更方便）</p>
<pre><code>==  等于
!=  不等于
gt  大于
lt  小于
</code></pre><h3 id="1-3-Trim"><a href="#1-3-Trim" class="headerlink" title="1.3 Trim"></a>1.3 Trim</h3><p>可以去掉语句最前面和最后的词，一般用来去掉逗号之类的。</p>
<pre><code>&lt;select id=&quot;queryUserByUsernameAndPasswordTrim&quot; resultType=&quot;com.cskaoyan.bean.User&quot;&gt;
    select id,username,password,age,gender from j16_user_t where
    &lt;trim prefixOverrides=&quot;and&quot;&gt;
        &lt;if test=&quot;usernamea != null and usernamea != &apos;&apos;&quot;&gt;
           and username = #{usernamea}
        &lt;/if&gt;
        &lt;if test=&quot;password != null&quot;&gt;
           and  password = #{password}
        &lt;/if&gt;
    &lt;/trim&gt;
&lt;/select&gt;
</code></pre><p>这就可以把and去掉</p>
<h3 id="1-4-Choose-when"><a href="#1-4-Choose-when" class="headerlink" title="1.4 Choose when"></a>1.4 Choose when</h3><p>相当于：If和else<br>找了一部分标签：如果username不等于null就按照username来查找，如果username等于null。就按照password来查</p>
<pre><code>&lt;where&gt;
    &lt;choose&gt;
        &lt;when test=&quot;username != null&quot;&gt;
            username = #{username}
        &lt;/when&gt;
        &lt;otherwise&gt;
            password = #{password}
        &lt;/otherwise&gt;
    &lt;/choose&gt;
&lt;/where&gt;
</code></pre><h3 id="1-5-Sql"><a href="#1-5-Sql" class="headerlink" title="1.5 Sql"></a>1.5 Sql</h3><p>就是把一些相同的东西放在一起，可以被其他地方调用。通过 include 标签<br>一个是把字段进行封装：</p>
<pre><code>&lt;sql id=&quot;base_column_list&quot;&gt;
    id,username,password,age,gender
&lt;/sql&gt;
</code></pre><p>一个是把查询的条件进行封装</p>
<pre><code>&lt;sql id=&quot;where_condition&quot;&gt;
    &lt;where&gt;
        &lt;choose&gt;
            &lt;when test=&quot;username != null&quot;&gt;
                username = #{username}
            &lt;/when&gt;
            &lt;otherwise&gt;
                password = #{password}
            &lt;/otherwise&gt;
        &lt;/choose&gt;
    &lt;/where&gt;
&lt;/sql&gt;
</code></pre><p>用法：</p>
<pre><code>&lt;select id=&quot;queryUserByUsernameAndPasswordChoose&quot; resultType=&quot;com.cskaoyan.bean.User&quot;&gt;
    select
    &lt;include refid=&quot;base_column_list&quot;/&gt;
    from j16_user_t
    &lt;include refid=&quot;where_condition&quot;/&gt;
&lt;/select&gt;
</code></pre><h3 id="1-6-SelectKey"><a href="#1-6-SelectKey" class="headerlink" title="1.6 SelectKey"></a>1.6 SelectKey</h3><p>主要做的是赋值的操作<br>例子一：获取插入数据的id(通过order = “AFTER”)</p>
<pre><code>/**
 * select key
 * order after
 */
@Test
public void mytest6(){
    sqlSession = sqlSessionFactory.openSession();
    UserMapper mapper = sqlSession.getMapper(UserMapper.class);
    User user = new User(&quot;xiaoshai&quot;, &quot;123456&quot;, &quot;utilman&quot;, 20);
    int i = mapper.insertUser(user);
    logger.info(user);
}

&lt;!--selectKey--&gt;
&lt;insert id=&quot;insertUser&quot;&gt;

    &lt;selectKey resultType=&quot;int&quot; keyProperty=&quot;user.id&quot; keyColumn=&quot;idz&quot; order=&quot;AFTER&quot;&gt;
        select last_insert_id() as idz
    &lt;/selectKey&gt;
    insert into
    j16_user_t
    (&lt;include refid=&quot;base_column_list&quot;/&gt;)//引入了&lt;sql&gt;标签中的sql语句或者标签
    value
    (null,#{user.username},#{user.password},#{user.age},#{user.gender})
&lt;/insert&gt;

&lt;sql id=&quot;base_column_list&quot;&gt;
    id,username,password,age,gender
&lt;/sql&gt;
</code></pre><p>selectKet的属性：</p>
<pre><code>keyProperty  对应的是userbean中的值
keyColumn    查询结果的对应的字段
order        表示查找是在sql语句执行之前还是之后
</code></pre><p>之间的内容（<strong>固定写法</strong>）不这么写会报错</p>
<pre><code>select last_insert_id() as idz
</code></pre><h3 id="1-7Foreach"><a href="#1-7Foreach" class="headerlink" title="1.7Foreach"></a>1.7Foreach</h3><p>两个用法：</p>
<pre><code>1.循环插入数据
2.拼接条件： 例如: where id **in** (1,2,3,4,5)
</code></pre><p>两种写法（只是foreach标签属性有变化）：<br>1.无注解：</p>
<pre><code>/*无注解*/
int insertUserList(List&lt;User&gt; users);
@Test
public void mytest8(){
    sqlSession = sqlSessionFactory.openSession();
    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);
    User user1 = new User(&quot;jiangsihai1&quot;, &quot;123456&quot;, &quot;erzhichan&quot;, 20);
    User user2 = new User(&quot;jiangsihai2&quot;, &quot;123456&quot;, &quot;erzhichan&quot;, 20);
    User user3 = new User(&quot;jiangsihai3&quot;, &quot;123456&quot;, &quot;erzhichan&quot;, 20);
    User user4 = new User(&quot;jiangsihai4&quot;, &quot;123456&quot;, &quot;erzhichan&quot;, 20);
    User user5 = new User(&quot;jiangsihai5&quot;, &quot;123456&quot;, &quot;erzhichan&quot;, 20);
    ArrayList&lt;User&gt; users = new ArrayList&lt;&gt;();
    users.add(user1);
    users.add(user2);
    users.add(user3);
    users.add(user4);
    users.add(user5);
    int i = userMapper.insertUserList(users);
    System.out.println(&quot;i = &quot; + i);
}
</code></pre><p>foreach的 <strong>collection=”list”</strong></p>
<pre><code>&lt;!--无注解插入list--&gt;
&lt;insert id=&quot;insertUserList&quot;&gt;
    INSERT INTO `j16_user_t`( `username`, `password`, `age`, `gender`) values
    &lt;foreach collection=&quot;list&quot; item=&quot;user&quot;  separator=&quot;,&quot;&gt;
        (#{user.username},#{user.password},#{user.age},#{user.gender})
    &lt;/foreach&gt;
&lt;/insert&gt;
</code></pre><p>2.有注解</p>
<pre><code>/*有注解*/
/*增加注解后，需要修改collection的值*/
int insertUserListAnnotation(@Param(&quot;users&quot;) List&lt;User&gt; users);
</code></pre><p>foreach的 <strong>collection=”users”</strong></p>
<pre><code>&lt;!--有注解list--&gt;
&lt;insert id=&quot;insertUserListAnnotation&quot;&gt;
    INSERT INTO `j16_user_t`( `username`, `password`, `age`, `gender`) values
    &lt;foreach collection=&quot;users&quot; item=&quot;user&quot;  separator=&quot;,&quot;&gt;
        (#{user.username},#{user.password},#{user.age},#{user.gender})
    &lt;/foreach&gt;
&lt;/insert&gt;
</code></pre><p>用法二：拼接条件,拼接in（）</p>
<pre><code>/*foreach*/
List&lt;User&gt; queryUsersInIdArray(@Param(&quot;ids&quot;) int[] ids);

&lt;select id=&quot;queryUsersInIdArray&quot; resultType=&quot;com.cskaoyan.bean.User&quot;&gt;
    select &lt;include refid=&quot;base_column_list&quot;/&gt; from j16_user_t
    where id in
    &lt;foreach collection=&quot;ids&quot; item=&quot;id&quot; separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot;&gt;
        #{id}
    &lt;/foreach&gt;
&lt;/select&gt;

@Test
public void mytest11(){
    sqlSession = sqlSessionFactory.openSession();
    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);
    int[] ids = {1, 2, 3, 4, 5};
    List&lt;User&gt; users = userMapper.queryUsersInIdArray(ids);
}
</code></pre><h3 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h3><h3 id="2-1-一对一"><a href="#2-1-一对一" class="headerlink" title="2.1 一对一"></a>2.1 一对一</h3><p>一个user对应一个userDetail</p>
<h3 id="2-1-1-Javabean关系维护"><a href="#2-1-1-Javabean关系维护" class="headerlink" title="2.1.1   Javabean关系维护"></a>2.1.1   Javabean关系维护</h3><p>User.java</p>
<pre><code>public class User {
    int id;
    String username;
    String password;
    int age;
    String gender;
    UserDetail userDetail;
}
</code></pre><p>UserDetail.java</p>
<pre><code>public class UserDetail {
    int id;
    String email;
    String phone;
    User user;
}
</code></pre><h3 id="2-1-2表关系维护"><a href="#2-1-2表关系维护" class="headerlink" title="2.1.2表关系维护"></a>2.1.2表关系维护</h3><p>在userDetail表中添加一个uid，表示userid，<br>重点在于怎么查数据</p>
<h3 id="2-1-3执行查询（重点）"><a href="#2-1-3执行查询（重点）" class="headerlink" title="2.1.3执行查询（重点）"></a>2.1.3执行查询（重点）</h3><p>分为分次查询和连接查询，之间的不同点在于：<br>查询次数的不同，<br>映射文件写法不同。<br>当然分次查询可以设置懒加载，而连接查询不行。</p>
<h3 id="2-1-3-1-分次查询"><a href="#2-1-3-1-分次查询" class="headerlink" title="2.1.3.1 分次查询"></a>2.1.3.1 分次查询</h3><pre><code>&lt;!--一对一的第一次查询--&gt;
&lt;select id=&quot;queryUserById&quot; resultMap=&quot;userMap&quot;&gt;
    select id,`username`, `password`, `age`, `gender` from j16_user_t where id = #{id}
&lt;/select&gt;
&lt;!--一对一的第二次查询--&gt;
&lt;select id=&quot;queryUserDetailByUid&quot; resultType=&quot;com.cskaoyan.bean.UserDetail&quot;&gt;
    select id,email,phone from j16_user_detail_t where uid = #{uid}
&lt;/select&gt;
</code></pre><p>第一次查询查询User,第二次查询查询UserDetail，这里就有个问题，如何把第一次和第二次的数据都放在UserBean中。<br>这里有注意到。我们第一次查询的结果是<strong>resultMap</strong>而且值是<strong>userMap</strong>这和resultType不同，说明我们有东西没写，没写的部分就是把数据放在一起的一连接，就是第一次查找的resultMap:</p>
<pre><code>&lt;!--分次查询的--&gt;
&lt;resultMap id=&quot;userMap&quot; type=&quot;com.cskaoyan.bean.User&quot;&gt;
    &lt;result column=&quot;id&quot; property=&quot;id&quot;/&gt;
    &lt;result column=&quot;username&quot; property=&quot;username&quot;/&gt;
    &lt;result column=&quot;password&quot; property=&quot;password&quot;/&gt;
    &lt;result column=&quot;age&quot; property=&quot;age&quot;/&gt;
    &lt;result column=&quot;gender&quot; property=&quot;gender&quot;/&gt;
    &lt;association property=&quot;userDetail&quot; column=&quot;id&quot; select=&quot;com.cskaoyan.mapper.UserMapper.queryUserDetailByUid&quot;/&gt;
&lt;/resultMap&gt;
</code></pre><p>resultMap之前我们应该在输出映射的时候说过，这里result标签当然很熟悉，但是这里出现了一个新的标签：</p>
<pre><code>&lt;association property=&quot;userDetail&quot; column=&quot;id&quot; select=&quot;com.cskaoyan.mapper.UserMapper.queryUserDetailByUid&quot;/&gt;
</code></pre><p>association表示的是第二次查询只需要查找一条数据，放到bean中。这里有几个属性:</p>
<pre><code>property:表示的是在User中，要把第二次查询的结果放到哪个User的成员变量中，也就是我们例子中的UserDetail
column:表示第一次查询结果的字段。当然查询结果可能会因为第一次查询使用了别名而改变
select:表示第二次查询的标签 namespace+ id
</code></pre><p><strong>注意事项：</strong><br>这里的select属性中的标签，可以不是在同一个包下，为了演示所以我们写在了同一个包下了。</p>
<h3 id="2-1-3-2-连接查询"><a href="#2-1-3-2-连接查询" class="headerlink" title="2.1.3.2 连接查询"></a>2.1.3.2 连接查询</h3><p>顾名思义我们使用一次查询得到结果。还记得之前学习的连接查询吗？那时我们是一次查询两张表。这里要说一点就是，不只是查询两张表，可以查询多张表。在多对多的连接查询我们在详细说。<br>连接查询：sql语句和标签<strong>注意这里我们只能使用resultMap来接收结果</strong>，如果使用resultType来表示接收的结果，那么我们就得到不userDetail相关的信息。我觉得原因可能是因为表中没有userDetail这样的字段，所以肯定查不到返回userDetail的是null</p>
<pre><code>&lt;select id=&quot;queryUserByIdLeft&quot; resultMap=&quot;userMapLeft&quot;&gt;
    select
    u.id,u.username,u.password,u.age,u.gender,ud.id as udid,ud.email,ud.phone
     from j16_user_t u
    LEFT JOIN j16_user_detail_t ud on u.id = ud.uid where u.id = #{id}
&lt;/select&gt;

&lt;!--连接查询--&gt;
&lt;resultMap id=&quot;userMapLeft&quot; type=&quot;com.cskaoyan.bean.User&quot;&gt;
    &lt;result column=&quot;id&quot; property=&quot;id&quot;/&gt;
    &lt;result column=&quot;username&quot; property=&quot;username&quot;/&gt;
    &lt;result column=&quot;password&quot; property=&quot;password&quot;/&gt;
    &lt;result column=&quot;age&quot; property=&quot;age&quot;/&gt;
    &lt;result column=&quot;gender&quot; property=&quot;gender&quot;/&gt;
    &lt;association property=&quot;userDetail&quot; javaType=&quot;com.cskaoyan.bean.UserDetail&quot;&gt;
        &lt;result column=&quot;udid&quot; property=&quot;id&quot;/&gt;
        &lt;result column=&quot;email&quot; property=&quot;email&quot;/&gt;
        &lt;result column=&quot;phone&quot; property=&quot;phone&quot;/&gt;
    &lt;/association&gt;
&lt;/resultMap&gt;
</code></pre><p>其实就是在association中我们把<strong>select</strong>属性换成了<strong>javaType</strong>,就是***Type，就是在对应的标签下面写result标签。例如我们的resultType, javaType，ofType等。</p>
<h3 id="2-2-一对多"><a href="#2-2-一对多" class="headerlink" title="2.2 一对多"></a>2.2 一对多</h3><p>例子就是：一个用户（User）可以有多个订单（Order）</p>
<h3 id="2-1-Javabean关系维护"><a href="#2-1-Javabean关系维护" class="headerlink" title=".2.1   Javabean关系维护"></a>.2.1   Javabean关系维护</h3><p>我们就需要在User里面设置一个Order的集合即可：</p>
<pre><code>public class User {
    int id;
    String username;
    String password;
    int age;
    String gender;
    List&lt;Order&gt; orders;
}
public class Order {
    int id;
    String name;
    double price;
}
</code></pre><h3 id="2-2-2-表关系维护"><a href="#2-2-2-表关系维护" class="headerlink" title="2.2.2   表关系维护"></a>2.2.2   表关系维护</h3><p>一对多，在多的一边，设置一个索引（Uid）指向我们的一的那张表。</p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>1.这些我都省略了set，get方法和tostring，这些是必须要写的，不然反射给你搞香蕉船的数据。<br>2.就是我们一般不使用<strong>外键</strong>但是我们还是会设置一个字段来。来表示关系，为了删除的时候不会出一些奇怪的异常</p>
<h3 id="2-2-3-执行查询"><a href="#2-2-3-执行查询" class="headerlink" title="2.2.3   执行查询"></a>2.2.3   执行查询</h3><h3 id="2-2-3-1-分次查询"><a href="#2-2-3-1-分次查询" class="headerlink" title="2.2.3.1 分次查询"></a>2.2.3.1 分次查询</h3><p>和我们一对一的分次查询类似，只不过第二次查出来的是一个集合，而不是单独的一个bean罢了。<br>所以我们使用的是<strong>collection</strong>标签，里面的属性值和上面一样</p>
<pre><code>&lt;!--一对多分次查询--&gt;
&lt;resultMap id=&quot;userMap&quot; type=&quot;com.cskaoyan.bean.User&quot;&gt;
    &lt;result column=&quot;id&quot; property=&quot;id&quot;/&gt;
    &lt;result column=&quot;username&quot; property=&quot;username&quot;/&gt;
    &lt;result column=&quot;password&quot; property=&quot;password&quot;/&gt;
    &lt;result column=&quot;age&quot; property=&quot;age&quot;/&gt;
    &lt;result column=&quot;gender&quot; property=&quot;gender&quot;/&gt;
    &lt;collection property=&quot;orders&quot; column=&quot;id&quot; select=&quot;com.cskaoyan.mapper.UserMapper.queryOrdersByUid&quot;/&gt;
&lt;/resultMap&gt;
&lt;!--一对多的第一次查询--&gt;
&lt;select id=&quot;queryUserById&quot; resultMap=&quot;userMap&quot;&gt;
    select id,`username`, `password`, `age`, `gender` from j16_user_t where id = #{id}
&lt;/select&gt;
</code></pre><h3 id="2-2-3-2-连接查询"><a href="#2-2-3-2-连接查询" class="headerlink" title="2.2.3.2 连接查询"></a>2.2.3.2 连接查询</h3><p>使用的依旧是左外链接，使用的也是collection标签，只不过这里我们把之前的javaType属性换成了ofType属性</p>
<pre><code>&lt;!--一对多的连接查询--&gt;
&lt;resultMap id=&quot;userMapLeft&quot; type=&quot;com.cskaoyan.bean.User&quot;&gt;
    &lt;result column=&quot;id&quot; property=&quot;id&quot;/&gt;
    &lt;result column=&quot;username&quot; property=&quot;username&quot;/&gt;
    &lt;result column=&quot;password&quot; property=&quot;password&quot;/&gt;
    &lt;result column=&quot;age&quot; property=&quot;age&quot;/&gt;
    &lt;result column=&quot;gender&quot; property=&quot;gender&quot;/&gt;
    &lt;collection property=&quot;orders&quot; ofType=&quot;com.cskaoyan.bean.Order&quot;&gt;
        &lt;result column=&quot;oid&quot; property=&quot;id&quot;/&gt;
        &lt;result column=&quot;name&quot; property=&quot;name&quot;/&gt;
        &lt;result column=&quot;price&quot; property=&quot;price&quot;/&gt;
    &lt;/collection&gt;
&lt;/resultMap&gt;
&lt;select id=&quot;queryUserByIdLeft&quot; resultMap=&quot;userMapLeft&quot;&gt;
    select
     u.id,u.username,u.password,u.age,u.gender,
     o.id as oid,o.name,o.price
     from j16_user_t u
    LEFT JOIN j16_order_t o on u.id = o.uid where u.id = #{id}
&lt;/select&gt;
</code></pre><h3 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h3><p>多对多的关系并不常见，不过多对多的关系可以分解成两个相对的一对多，然后采用上面的1对多的方法进行查找即可。<br>例子：学生和课程，一个学生可以选多门课程，一门课可以多个学生上。</p>
<h3 id="Javabean关系维护"><a href="#Javabean关系维护" class="headerlink" title="Javabean关系维护"></a>Javabean关系维护</h3><p>因为分别是两个一对多的关系，所以我们在每个表中都建立一个list来存放一个学生的多节课，和一节课多个学生的集合。</p>
<pre><code>public class Student {
    int id;
    String name;
    List&lt;Course&gt; courses;
}
public class Course {
    int id;
    String name;
    List&lt;Student&gt; students;
}
</code></pre><h3 id="表关系维护"><a href="#表关系维护" class="headerlink" title="表关系维护"></a>表关系维护</h3><p>这里我们需要一个中间表，这个中间表作用就是帮助我们找到我们需要一对多的关系。</p>
<pre><code>CREATE TABLE `student_course_relationship_t` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sid` int(11) DEFAULT NULL,
  `cid` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8;
</code></pre><p>这个表表示了学生和课程的中间表。</p>
<h3 id="执行查询"><a href="#执行查询" class="headerlink" title="执行查询"></a>执行查询</h3><p>假设我们查找<strong>所有学生</strong>的课程表<br>我们执行查询，我们虽然我们可以分成三次查询，第一次查学生，第二次去查关系表，第三次查课程表，找到每个学生的课程的集合，但是这样太慢了，我们不选择使用这种。</p>
<h3 id="分次查询"><a href="#分次查询" class="headerlink" title="分次查询"></a>分次查询</h3><p>分次指的是一次查询到所有学生，然后通过左外连接查询查到所有学生的课程。</p>
<pre><code>&lt;resultMap id=&quot;studentMap&quot; type=&quot;com.cskaoyan.bean.Student&quot;&gt;
    &lt;result column=&quot;id&quot; property=&quot;id&quot;/&gt;
    &lt;result column=&quot;name&quot; property=&quot;name&quot;/&gt;
    &lt;collection property=&quot;courses&quot; column=&quot;id&quot; select=&quot;com.cskaoyan.mapper.StudentMapper.queryCoursesByStuId&quot;/&gt;
&lt;/resultMap&gt;
&lt;!--第一次查询--&gt;
&lt;select id=&quot;queryAllStudent&quot; resultMap=&quot;studentMap&quot;&gt;
    select id,`name` from j16_student_t limit 2
&lt;/select&gt;
&lt;!--第二次查询--&gt;
&lt;select id=&quot;queryCoursesByStuId&quot; resultType=&quot;com.cskaoyan.bean.Course&quot;&gt;
    select c.id,c.name from  j16_student_course_relationship_t rela
    LEFT JOIN j16_course_t c on rela.course_id = c.id
    where rela.student_id = #{abc}
&lt;/select&gt;
</code></pre><h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><p>使用两次左连接查询，直接查出<strong>所有学生的课程关系</strong><br>因为是所有学生，所以左查询要把学生放在左边</p>
<pre><code>&lt;!--一次查询  两次左外链接--&gt;
&lt;select id=&quot;queryAllStudentOnce&quot; resultMap=&quot;studentMapLeft&quot;&gt;
    select s.id,s.name,c.id as cid,c.name as cname from j16_student_t s
    LEFT JOIN j16_student_course_relationship_t scr
    on s.id = scr.sid
    LEFT JOIN j16_course_t c
    on scr.cid = c.id
&lt;/select&gt;
</code></pre><h3 id="Limit"><a href="#Limit" class="headerlink" title="Limit"></a>Limit</h3><p>这是一个分页用的，当我们在分次查询的时候，在第一次使用limit条数，就是对学生数量进行限制，当我们在最后设置limit就是对最后的结果进行限制。</p>
<h2 id="星期三（9月25）"><a href="#星期三（9月25）" class="headerlink" title="星期三（9月25）"></a>星期三（9月25）</h2><h3 id="Orm层的优化"><a href="#Orm层的优化" class="headerlink" title="Orm层的优化"></a>Orm层的优化</h3><h3 id="1-1-懒加载"><a href="#1-1-懒加载" class="headerlink" title="1.1 懒加载"></a>1.1 懒加载</h3><p>分次查询的使用场景、默认没有开启懒加载、需要手动开启<br>当setting中lazyLoadingEnabled= true时，分次查询已经开启了懒加载</p>
<pre><code>&lt;settings&gt;
    &lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt;
&lt;/settings&gt;
</code></pre><p>开启懒加载开关后，默认分次查询都为懒加载；<br>如果需要开启立即加载，需要让association或collection标签的fetchType属性为eager<br>mapper.xml</p>
<pre><code>&lt;!--分次查询的--&gt;
&lt;resultMap id=&quot;userMap&quot; type=&quot;com.cskaoyan.bean.User&quot;&gt;
  &lt;result column=&quot;id&quot; property=&quot;id&quot;/&gt;
  &lt;result column=&quot;username&quot; property=&quot;username&quot;/&gt;
  &lt;result column=&quot;password&quot; property=&quot;password&quot;/&gt;
  &lt;result column=&quot;age&quot; property=&quot;age&quot;/&gt;
  &lt;result column=&quot;gender&quot; property=&quot;gender&quot;/&gt;
  &lt;association property=&quot;userDetail&quot; column=&quot;id&quot; select=&quot;com.cskaoyan.mapper.UserMapper.queryUserDetailByUid&quot; fetchType=&quot;eager&quot;/&gt;//设置立即加载
&lt;/resultMap&gt;
&lt;!--一对一的第一次查询--&gt;
&lt;select id=&quot;queryUserById&quot; resultMap=&quot;userMap&quot;&gt;
    select id,`username`, `password`, `age`, `gender` from j16_user_t where id = #{id}
&lt;/select&gt;
&lt;!--一对一的第二次查询--&gt;
&lt;select id=&quot;queryUserDetailByUid&quot; resultType=&quot;com.cskaoyan.bean.UserDetail&quot;&gt;
    select id,email,phone from j16_user_detail_t where uid = #{uid}
&lt;/select&gt;
</code></pre><p>MyTest.java<strong>通过查看日志查看查找了几次来判断是否实现懒加载啊</strong></p>
<pre><code>/**
 * 懒加载只会查询一次
 * 注意看logger
 * 打印user就不是懒加载了
 * 或者debug也不是了
 * 因为都调用了toString的方法
 */
@Test
public void test1(){
    User user = mapper.queryUserById(1);
}
</code></pre><h3 id="1-2-缓存"><a href="#1-2-缓存" class="headerlink" title="1.2 缓存"></a>1.2 缓存</h3><p><strong>1.2.1 一级缓存</strong><br>会话级别：同一个sqlSession，不同mapper，查询相同的内容，只会执行一次数据库的查询。<br>默认开启一级缓存</p>
<pre><code>/**
 * 一级缓存：
 * 同一个session的不同mapper可以查询相同的东西
 * 只查询一次
 * 默认就是一级缓存的
 *
 */
@Test
public void test1(){
    UserMapper mapper = sqlSession.getMapper(UserMapper.class);
    UserMapper mapper2 = sqlSession.getMapper(UserMapper.class);

    User user = mapper.queryUserById(1);
    sqlSession.commit();  //提交将会一级缓存失效
    User user2 = mapper2.queryUserById(1);
}
</code></pre><p><strong>1.2.2 二级缓存</strong><br>3件事情：<br>1、开启缓存开关</p>
<pre><code>&lt;settings&gt;
    &lt;!-- &lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt; --&gt;
    &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;
&lt;/settings&gt;
</code></pre><p>2、Javabean增加序列化的接口</p>
<pre><code>public class User implements Serializable{
</code></pre><p>3、映射文件中增加缓存标签</p>
<pre><code>&lt;cache/&gt;
</code></pre><p>sqlSession.commit时存入二级缓存<br>执行cud操作时，清空二级缓存</p>
<pre><code> * 二级缓存开启需要条件
 * 1、开启缓存开关
 * setting:
 *         &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;
 * 2、Javabean增加序列化的接口
 * Serializable
 * 3、映射文件中增加缓存标签
 *&lt;cache/&gt;
 *
 */
@Test
public void test2(){
    SqlSession sqlSession1 =  sqlSessionFactory.openSession();
    UserMapper userMapper1 = sqlSession1.getMapper(UserMapper.class);
    SqlSession sqlSession2 =  sqlSessionFactory.openSession();
    UserMapper userMapper2 = sqlSession2.getMapper(UserMapper.class);
    /*使用来源不同的sqlSession获得的不同的mapper执行同一个查询*/
    //第一个sqlSession提交之后才开始二级缓存
    sqlSession1.commit();
    //cud之后就二级缓存失效
    User user1 = userMapper1.queryUserById(1);
    user1.setUsername(&quot;25zai123123&quot;);
    //注解实现
    int i = userMapper1.updateUserName(user1);
    System.out.println(1);
    sqlSession1.commit();
    User user2 = userMapper2.queryUserById(1);
}
</code></pre><h3 id="Alias"><a href="#Alias" class="headerlink" title="Alias"></a>Alias</h3><p>在类上出现定义别名<br>@Alias(“userz”)<br>public class User implements Serializable</p>
<p><strong>注意事项</strong>必须要写：</p>
<pre><code>&lt;typeAliases&gt;
&lt;!--&lt;typeAlias type=&quot;com.cskaoyan.bean.User&quot; alias=&quot;userz&quot;/&gt;--&gt;
    &lt;!--别名是类名的小写形式 user car UserDetail userdetail--&gt;
    &lt;package name=&quot;com.cskaoyan.bean&quot;/&gt;
&lt;/typeAliases&gt;
</code></pre><p>才能开启。这样在mapper.xml的resultType里面就不需要写全类名</p>
<h3 id="使用注解替代部分标签"><a href="#使用注解替代部分标签" class="headerlink" title="使用注解替代部分标签"></a>使用注解替代部分标签</h3><pre><code>CRUD
@Select(&quot;select username from j16_user_t where id = #{id}&quot;)
String queryUserNameById(@Param(&quot;id&quot;)int id);

@Update(&quot;update j16_user_t set username = #{username} where id = #{id}&quot;)
int updateUserName(User user);
</code></pre><h3 id="逆向工程mybatis-generator"><a href="#逆向工程mybatis-generator" class="headerlink" title="逆向工程mybatis generator"></a>逆向工程mybatis generator</h3><p>数据库中的表→Bean mapper mapper.xml<br>第一步：当然还是导包需要一个mybatis-generator-core</p>
<pre><code>&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt;
    &lt;version&gt;1.3.7&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;version&gt;5.1.47&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
    &lt;version&gt;3.5.2&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;version&gt;4.12&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre><p>第二步：我们需要一个main方法来帮我们生成这些东西：</p>
<pre><code>public class Generator {
    public void generator() throws Exception{
        List&lt;String&gt; warnings = new ArrayList&lt;String&gt;();
        boolean overwrite = true; //指向逆向工程配置文件
        File configFile = new File(&quot;generatorConfig.xml&quot;);
        System.out.println(configFile.getAbsolutePath());
        ConfigurationParser cp = new ConfigurationParser(warnings);
        Configuration config = cp.parseConfiguration(configFile);
        DefaultShellCallback callback = new DefaultShellCallback(overwrite);
        MyBatisGenerator myBatisGenerator =
                new MyBatisGenerator(config, callback, warnings);
        myBatisGenerator.generate(null);
    }
    public static void main(String[] args) throws Exception {
        try {
            Generator generatorSqlmap = new Generator();
            generatorSqlmap.generator();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
    }
}
</code></pre><p>第三步：我们需要一个generatorConfig.xml配置文件<br>主要还是配置四个东西：<br>我们的数据库的，生成mapper.xml,生成bean,生成mapper接口</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE generatorConfiguration
        PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;
&lt;generatorConfiguration&gt;
  &lt;context id=&quot;testTables&quot; targetRuntime=&quot;MyBatis3&quot;&gt;
      &lt;commentGenerator&gt;
          &lt;!-- 是否去除自动生成的注释 true：是 ： false:否 --&gt;
          &lt;property name=&quot;suppressAllComments&quot; value=&quot;true&quot; /&gt;
      &lt;/commentGenerator&gt;
      &lt;!--数据库连接的信息：驱动类、连接地址、用户名、密码 --&gt;
      &lt;jdbcConnection driverClass=&quot;com.mysql.jdbc.Driver&quot;
                      connectionURL=&quot;jdbc:mysql://localhost:3306/j16_db&quot;
                      userId=&quot;root&quot;
                      password=&quot;123456&quot;&gt;
          &lt;!--是否去除同名表--&gt;
          &lt;property name=&quot;nullCatalogMeansCurrent&quot; value=&quot;true&quot;/&gt;
      &lt;/jdbcConnection&gt;
      &lt;!--&amp;lt;!&amp;ndash;
          for oracle
         &amp;ndash;&amp;gt;
      &lt;jdbcConnection driverClass=&quot;oracle.jdbc.OracleDriver&quot;
          connectionURL=&quot;jdbc:oracle:thin:@127.0.0.1:1521:yycg&quot;
          userId=&quot;yycg&quot;
          password=&quot;yycg&quot;&gt;
      &lt;/jdbcConnection&gt;--&gt;

      &lt;!-- 默认false，
          为false把JDBC DECIMAL 和 NUMERIC 类型解析为Integer，
          为 true把JDBC DECIMAL 和 NUMERIC 类型解析为java.math.BigDecimal --&gt;
      &lt;!--&lt;javaTypeResolver&gt;
          &lt;property name=&quot;forceBigDecimals&quot; value=&quot;false&quot; /&gt;
      &lt;/javaTypeResolver&gt;--&gt;

      &lt;!-- javaModelGenerator javaBean生成的配置信息
           targetProject:生成PO类的位置
           targetPackage：生成PO类的类名--&gt;
      &lt;javaModelGenerator targetPackage=&quot;com.example.bean&quot;
                          targetProject=&quot;.\src\main\java&quot;&gt;
          &lt;!-- enableSubPackages:是否允许子包,是否让schema作为包的后缀
               即targetPackage.schemaName.tableName --&gt;
          &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;
          &lt;!-- 从数据库返回的值是否清理前后的空格 --&gt;
          &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot; /&gt;
      &lt;/javaModelGenerator&gt;
      &lt;!-- sqlMapGenerator Mapper映射文件的配置信息
          targetProject:mapper映射文件生成的位置
          targetPackage:生成mapper映射文件放在哪个包下--&gt;
      &lt;sqlMapGenerator targetPackage=&quot;com.example.mapper&quot;
                       targetProject=&quot;.\src\main\resources&quot;&gt;
          &lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;
          &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;
      &lt;/sqlMapGenerator&gt;

      &lt;!--
         javaClientGenerator 生成 Model对象(JavaBean)和 mapper XML配置文件 对应的Dao代码
         targetProject:mapper接口生成的位置
         targetPackage:生成mapper接口放在哪个包下

         ANNOTATEDMAPPER
         XMLMAPPER
         MIXEDMAPPER
      --&gt;

      &lt;javaClientGenerator type=&quot;XMLMAPPER&quot;
                           targetPackage=&quot;com.example.mapper&quot;
                           targetProject=&quot;.\src\main\java&quot;&gt;
          &lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;
          &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;
      &lt;/javaClientGenerator&gt;&lt;!----&gt;
      &lt;!-- 指定数据库表 --&gt;

          &lt;!-- 指定所有数据库表 --&gt;

          &lt;!--&lt;table tableName=&quot;%&quot;
                 enableCountByExample=&quot;false&quot;
                 enableUpdateByExample=&quot;false&quot;
                 enableDeleteByExample=&quot;false&quot;
                 enableSelectByExample=&quot;false&quot;
                 enableInsert=&quot;false&quot;
                 enableDeleteByPrimaryKey=&quot;true&quot;
                 enableSelectByPrimaryKey=&quot;true&quot;
                 selectByExampleQueryId=&quot;false&quot; &gt;&lt;/table&gt;--&gt;

             &lt;!-- 指定数据库表，要生成哪些表，就写哪些表，要和数据库中对应，不能写错！ --&gt;
             &lt;table  tableName=&quot;j16_user_t&quot;
                     enableCountByExample=&quot;false&quot;
                     enableUpdateByExample=&quot;false&quot;
                     enableDeleteByExample=&quot;false&quot;
                     enableSelectByExample=&quot;false&quot;
                     enableInsert=&quot;true&quot;
                     enableDeleteByPrimaryKey=&quot;true&quot;
                     enableSelectByPrimaryKey=&quot;true&quot;
                     selectByExampleQueryId=&quot;false&quot;
                     domainObjectName=&quot;User&quot;
             &gt; &lt;/table&gt;
              &lt;table tableName=&quot;j16_student_t&quot; domainObjectName=&quot;Studentz&quot;/&gt;
              &lt;table tableName=&quot;j16_account_t&quot; domainObjectName=&quot;Account&quot;/&gt;

      &lt;!--      &lt;table schema=&quot;&quot; tableName=&quot;orders&quot;&gt;&lt;/table&gt;
           &lt;table schema=&quot;&quot; tableName=&quot;items&quot;&gt;&lt;/table&gt;
           &lt;table schema=&quot;&quot; tableName=&quot;orderdetail&quot;&gt;&lt;/table&gt;
    --&gt;
     &lt;!-- 有些表的字段需要指定java类型
      &lt;table schema=&quot;&quot; tableName=&quot;&quot;&gt;
         &lt;columnOverride column=&quot;&quot; javaType=&quot;&quot; /&gt;
     &lt;/table&gt; --&gt;
  &lt;/context&gt;
&lt;/generatorConfiguration&gt;
</code></pre><p>第四步：运行main方法就行了</p>
<h2 id="星期四（9月26）"><a href="#星期四（9月26）" class="headerlink" title="星期四（9月26）"></a>星期四（9月26）</h2><h2 id="星期四（0926）"><a href="#星期四（0926）" class="headerlink" title="星期四（0926）"></a>星期四（0926）</h2><p>通过四个demo来了解spring+mybatis的整合和spring + springMVC + mybatis的整合</p>
<h3 id="demo1-实现spring-mybatis的整合"><a href="#demo1-实现spring-mybatis的整合" class="headerlink" title="demo1: 实现spring + mybatis的整合"></a>demo1: 实现spring + mybatis的整合</h3><p><strong>第一步导包</strong></p>
<pre><code>&lt;!--Spring中配置mybatis--&gt;
&lt;dependencies&gt;
  &lt;!-- 导入spring --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
    &lt;version&gt;5.1.9.RELEASE&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;!-- 导入事务 --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
    &lt;version&gt;5.1.9.RELEASE&lt;/version&gt;
  &lt;/dependency&gt;

  &lt;!--数据相关--&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
    &lt;version&gt;3.5.2&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;
    &lt;version&gt;2.0.2&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;version&gt;5.1.47&lt;/version&gt;
    &lt;scope&gt;runtime&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;druid&lt;/artifactId&gt;
    &lt;version&gt;1.1.20&lt;/version&gt;
  &lt;/dependency&gt;

  &lt;!--测试相关--&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;version&gt;4.12&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-test&lt;/artifactId&gt;
    &lt;version&gt;5.1.9.RELEASE&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre><p><strong>第二步</strong><br>配置我们的applicaiton.xml<br>首先回想一下我们青春版的mybatis.xml配置了哪些东西？<br>就两个：一个dataSource 一个mapper<br>application.xml</p>
<pre><code>&lt;!--spring的扫描头--&gt;
&lt;context:component-scan base-package=&quot;com.cskaoyan&quot;/&gt;

&lt;!--我们需要datasource提供给sqlSessionFactoryBean和dataSourceTransactionManager--&gt;
&lt;bean id=&quot;datasource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt;
    &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/j16_db?useUnicode=true&amp;amp;characterEncoding=utf-8&quot;/&gt;
    &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
    &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;
&lt;/bean&gt;

&lt;!--配置mybatis 相当于之前的mybatis.xml(我们需要配置两个东西)--&gt;
&lt;!--配置sqlFactoryBean--&gt;
&lt;!--这里是factorybean不是facotry，factory不能注册--&gt;
&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;datasource&quot;/&gt;
&lt;/bean&gt;
&lt;!--配置映射mapper的包--&gt;
&lt;bean id=&quot;mapper&quot; class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;
    &lt;property name=&quot;basePackage&quot; value=&quot;com.cskaoyan.mapper&quot;/&gt;
    &lt;!--还要知道需要那个sqlFactorybean来扫描--&gt;
    &lt;property name=&quot;sqlSessionFactoryBeanName&quot; value=&quot;sqlSessionFactory&quot;/&gt;
&lt;/bean&gt;

&lt;!--配置事务--&gt;
&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;datasource&quot;/&gt;
&lt;/bean&gt;
&lt;!--开始事务的注释--&gt;
&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt;
</code></pre><p><strong>第三步加一些业务代码</strong><br>UserMapper.java</p>
<pre><code>public interface UserMapper {
  @Select(&quot;select id,username,password,age,gender from j16_user_t where id = #{id}&quot;)
  User queryUserById(@Param(&quot;id&quot;)int id);
}
</code></pre><p>UserServiceImpl.java</p>
<pre><code>@Service
public class UserServiceImpl implements UserService {
    @Autowired
    UserMapper userMapper;
    @Override
    public User queryUserById(int id) {
        return userMapper.queryUserById(id);
    }
}
</code></pre><p><strong>第四步进行测试</strong></p>
<pre><code>@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(&quot;classpath:application.xml&quot;)
public class SMTest {
    @Autowired
    UserService userService;
    @Autowired
    UserMapper userMapper;
    @Test
    public void mytest(){
        User user1 = userService.queryUserById(1);
        User user2 = userMapper.queryUserById(1);
    }
}
</code></pre><h3 id="demo2-实现spring-springMVC-mybatis整合"><a href="#demo2-实现spring-springMVC-mybatis整合" class="headerlink" title="demo2: 实现spring + springMVC + mybatis整合"></a>demo2: 实现spring + springMVC + mybatis整合</h3><p>加入MVC我们知道就相当于加入了dispatcherServlet.也就加入我们controller层。</p>
<p>第一步：先导包</p>
<pre><code>&lt;!--整合spring + SpringMVC + mybatis--&gt;
&lt;dependencies&gt;
  &lt;!--springMVC--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
      &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
      &lt;version&gt;3.0-alpha-1&lt;/version&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;!--先导入spring相关--&gt;

  &lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
      &lt;version&gt;5.1.9.RELEASE&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;!--数据库相关--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;mysql&lt;/groupId&gt;
      &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
      &lt;version&gt;5.1.47&lt;/version&gt;
      &lt;scope&gt;runtime&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
      &lt;artifactId&gt;druid&lt;/artifactId&gt;
      &lt;version&gt;1.1.20&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
      &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
      &lt;version&gt;3.5.2&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
      &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;
      &lt;version&gt;2.0.2&lt;/version&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
      &lt;version&gt;5.1.9.RELEASE&lt;/version&gt;
  &lt;/dependency&gt;

  &lt;!--json支持--&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
      &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
      &lt;version&gt;2.9.9&lt;/version&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre><p>第二步：依旧是配置我们application.xml<br>也就加一行schema，然后在下面加一行mvc扫描开关</p>
<pre><code>  &lt;!--springmvc--&gt;
&lt;mvc:annotation-driven/&gt;
</code></pre><p>第三步业务代码</p>
<pre><code>@RestController
public class HelloController {
  @Autowired
  UserService userService;
  @RequestMapping(&quot;/hello&quot;)
  public User hello(int id){
      User user = userService.queryUserById(id);
      return user;
  }
}
@Service
public class UserServiceImpl implements UserService {
  @Autowired
  UserMapper userMapper;
  @Override
  public User queryUserById(int id) {
      return userMapper.queryUserById(id);
  }
}
public interface UserMapper {
  @Select(&quot;select id,username,password,age,gender from j16_user_t where id = #{id}&quot;)
  User queryUserById(@Param(&quot;id&quot;) int id);
}
</code></pre><p>第四步：tomcat启动项目<br>在搜索框输入/hello?id = 1; 将返回一个json数据。</p>
<h3 id="demo3-ssm整合-spring和springMVC配置文件分开"><a href="#demo3-ssm整合-spring和springMVC配置文件分开" class="headerlink" title="demo3: ssm整合 spring和springMVC配置文件分开"></a>demo3: ssm整合 spring和springMVC配置文件分开</h3><p>我们知道spring容器是springMVC的父容器，肯定要先启动父容器，然后我们再看一下他们各自需要启动什么。springMVC应该只需要在dispachterServlet初始化时候初始化。Spring可以提前初始化，使用servletcontext的监听器。来优先初始化我们的Spring。而</p>
<p>第一步：导包<br>第二步：配置我们web.xml<br>我们要application.xml 和 application-mvc.xml分开Spring提交要初始化。</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;
       version=&quot;4.0&quot;&gt;
  &lt;!--使用监听器用来配置springMVC--&gt;
  &lt;listener&gt;
    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
  &lt;/listener&gt;
  &lt;context-param&gt;
    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
    &lt;param-value&gt;classpath:application.xml&lt;/param-value&gt;
  &lt;/context-param&gt;

  &lt;!--用来配置springMVC--&gt;
  &lt;servlet&gt;
    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
        &lt;param-value&gt;classpath:application-mvc.xml&lt;/param-value&gt;
    &lt;/init-param&gt;
  &lt;/servlet&gt;
  &lt;servlet-mapping&gt;
    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/&lt;/url-pattern&gt;
  &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</code></pre><p>第三步：编写application.xml application-mvc.xml 其实就是把两个配置文件从一个分成两个。也就多了一个</p>
<pre><code>&lt;context:exclude-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;
</code></pre><p>application.xml</p>
<pre><code>&lt;!--这是Spring的配置文件我要知道我配置的哪些组件--&gt;
&lt;!--首先需要一个spring的注解的扫描 把springMVC需要扫描的注解拿出来--&gt;
&lt;!--注解写法@ComponentScan(basePackages = &quot;com.cskaoyan&quot;,
    excludeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION,
    value = {Controller.class, EnableWebMvc.class}))--&gt;

&lt;context:component-scan base-package=&quot;com.cskaoyan&quot;&gt;
    &lt;context:exclude-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;
&lt;/context:component-scan&gt;

&lt;!--配合数据源--&gt;
&lt;bean id=&quot;datasource&quot; class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt;
    &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/j16_db?useUnicode=true&amp;amp;characterEncoding=utf-8&quot;/&gt;
    &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
    &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;
&lt;/bean&gt;

&lt;!--配置mybatis 相当于之前的mybatis.xml(我们需要配置两个东西)--&gt;
&lt;!--配置sqlFactoryBean--&gt;
&lt;!--这里是factorybean不是facotry，factory不能注册--&gt;
&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;datasource&quot;/&gt;
&lt;/bean&gt;
&lt;!--配置映射mapper的包--&gt;
&lt;bean id=&quot;mapper&quot; class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;
    &lt;property name=&quot;basePackage&quot; value=&quot;com.cskaoyan.mapper&quot;/&gt;
    &lt;!--还要知道需要那个sqlFactorybean来扫描--&gt;
    &lt;property name=&quot;sqlSessionFactoryBeanName&quot; value=&quot;sqlSessionFactory&quot;/&gt;
&lt;/bean&gt;
&lt;!--配置事务--&gt;
&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;datasource&quot;/&gt;
&lt;/bean&gt;
&lt;!--开始事务的注释--&gt;
&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot;/&gt;
</code></pre><p>application-mvc.xml</p>
<pre><code>&lt;!--springMVC需要设置一个扫描包 和一个开启mvc注解--&gt;
&lt;context:component-scan base-package=&quot;com.cskaoyan.controller&quot;&gt;
    &lt;context:include-filter type=&quot;annotation&quot; expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;
&lt;/context:component-scan&gt;
&lt;mvc:annotation-driven/&gt;
</code></pre><p>我们需要controller下的需要MVC来扫描，而其他的包文件用Spring进行扫描，之前讲Spring和SpringMVC配置javaConfig时有说过<br>其他都一样的，不说了。</p>
<h3 id="demo4-使用javaConfig进行配置"><a href="#demo4-使用javaConfig进行配置" class="headerlink" title="demo4: 使用javaConfig进行配置"></a>demo4: 使用javaConfig进行配置</h3><p>第一步：导包<br>第二步：启动类</p>
<pre><code>public class WebappInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {
    @Override
    protected Class&lt;?&gt;[] getRootConfigClasses() {
        return new Class[]{SpringConfig.class};
    }

    @Override
    protected Class&lt;?&gt;[] getServletConfigClasses() {
        return new Class[]{MvcConfig.class};
    }

    @Override
    protected String[] getServletMappings() {
        return new String[]{&quot;/&quot;};
    }
}
</code></pre><p>第三步编写配置文件的javaConfig<br>Spring的配置：</p>
<pre><code>@ComponentScan(basePackages = &quot;com.cskaoyan&quot;,
        excludeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION,value = {Controller.class, EnableWebMvc.class}))
@Configuration
@EnableTransactionManagement
public class SpringConfig {
    /*sqlSessionFactorybean*/
    @Bean
    public SqlSessionFactoryBean sqlSessionFactory(DataSource dataSource){
        SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean();
        sqlSessionFactoryBean.setDataSource(dataSource);
        return sqlSessionFactoryBean;
    }
    /*mapperScannerConfigurer*/
    @Bean
    public MapperScannerConfigurer mapperScannerConfigurer(){
        MapperScannerConfigurer mapperScannerConfigurer = new MapperScannerConfigurer();
        mapperScannerConfigurer.setSqlSessionFactoryBeanName(&quot;sqlSessionFactory&quot;);
        mapperScannerConfigurer.setBasePackage(&quot;com.cskaoyan.mapper&quot;);

        return mapperScannerConfigurer;
    }
    /*datasource*/
    @Bean
    public DataSource druidDatasource(){
        DruidDataSource druidDataSource = new DruidDataSource();
        druidDataSource.setDriverClassName(&quot;com.mysql.jdbc.Driver&quot;);
        druidDataSource.setUrl(&quot;jdbc:mysql://localhost:3306/j16_db?useUnicode=true&amp;characterEncoding=utf-8&quot;);
        druidDataSource.setUsername(&quot;root&quot;);
        druidDataSource.setPassword(&quot;123456&quot;);
        return druidDataSource;
    }
    /*事务*/
    @Bean
    public DataSourceTransactionManager dataSourceTransactionManager(DataSource dataSource){
        DataSourceTransactionManager dataSourceTransactionManager = new DataSourceTransactionManager();
        dataSourceTransactionManager.setDataSource(dataSource);
        return dataSourceTransactionManager;
    }
}
</code></pre><p>SpringMvc配置；</p>
<pre><code>@EnableWebMvc
@ComponentScan(&quot;com.cskaoyan.controller&quot;)
public class MvcConfig implements WebMvcConfigurer {
}
</code></pre><h2 id="星期五（9月27）"><a href="#星期五（9月27）" class="headerlink" title="星期五（9月27）"></a>星期五（9月27）</h2><h3 id="3-3-1-Properteies配置"><a href="#3-3-1-Properteies配置" class="headerlink" title="3.3.1 Properteies配置"></a>3.3.1 Properteies配置</h3><p>每一个springBoot项目默认都有一个application.properties文件<br><strong>3.3.1.1 配置context-path</strong></p>
<pre><code>server.servlet.context-path= /production
</code></pre><p>等号前面的空格会默认去掉，但是后面的不会。<br>所以后面不能加空格。<br>application.properties</p>
<p><strong>3.3.1.2 修改端口号</strong></p>
<pre><code>server.port=9090
server.servlet.context-path=/helloworld
</code></pre><p><strong>3.3.1.3  数据配置</strong><br>我们可以把配置写在配置文件里面，然后我们的代码引用</p>
<p>application.properties</p>
<pre><code>dest: shenzhen
from: guangzhou
</code></pre><p>MyController.java</p>
<pre><code>@RestController
public class MyController {
    @Value(&quot;${dest}&quot;)
    String home;
    @Value(&quot;${from}&quot;)
    String school;
    @RequestMapping(&quot;/hello1&quot;)
    public Map helloSb(){
        HashMap&lt;Object, Object&gt; map = new HashMap&lt;&gt;();
        map.put(&quot;home&quot;,home);
        map.put(&quot;school&quot;,school);
        System.out.println(home);
        System.out.println(school);
        return map;
    }
}
</code></pre><h3 id="3-3-2-Yml配置"><a href="#3-3-2-Yml配置" class="headerlink" title="3.3.2 Yml配置"></a>3.3.2 Yml配置</h3><pre><code>server:
  servlet:
    context-path: /hello
  port: 8080
</code></pre><h3 id="Yaml基本语法"><a href="#Yaml基本语法" class="headerlink" title="Yaml基本语法"></a>Yaml基本语法</h3><p>1.大小写敏感 （同xml语法）<br>2.使用缩进表示层级关系<br>3.在properties文件中是以”.”进行分割的， 在yml中是用”:”进行分割;<br>4.yml的数据格式和json的格式很像，都是K-V格式，并且通过”:”进行赋值；<br>5.在yml中缩进一定不能使用TAB，否则会报很奇怪的错误，缩进只能用空格  缩进的空格数目不重要，只要相同层级的元素左侧对齐即可；<br><strong>6.每个k的冒号后面一定都要加一个空格；</strong></p>
<h3 id="3-3-3-高级用法（Property也支持）"><a href="#3-3-3-高级用法（Property也支持）" class="headerlink" title="3.3.3 高级用法（Property也支持）"></a>3.3.3 高级用法（Property也支持）</h3><p>引入ConfigurationProperties<br>设置prefix，在配置文件中就配置值</p>
<pre><code>@ConfigurationProperties(prefix = &quot;myfile.config&quot;)
@Component
public class MyFileConfig {
  String filePath;
  String fileType;
  int value;
  String picFilePath;
  String excelFilePath;
}
</code></pre><p>application.yml</p>
<pre><code>myfile:
  config:
    file-path: d://spring
    file-type: .jpg
    value: ${random.int(10)}
    pic-file-path: ${myfile.config.file-path}/pic/${my.user}
    excel-file-path: ${myfile.config.file-path}/excel
</code></pre><p><strong>类型</strong></p>
<pre><code>@ConfigurationProperties(prefix = &quot;user&quot;)
@Component
public class UserProperty {
    String username;
    int age;
    boolean married;
    Map&lt;String,String&gt; map;
    List list;
    MyProp myProp;
    set..get..
}
</code></pre><p>application.yml</p>
<pre><code>user:
  age: 10
  username: zhangsong
  married: true
  map: {key1: value1, key2: value2}
  list:
    - lzl
    - wzh
    - zgr
  my-prop:
    from: beijin
    to: wuhan
</code></pre><p>测试</p>
<pre><code>@Autowired
UserProperty userProperty;
@RequestMapping(&quot;/hello2&quot;)
public UserProperty helloSb2(){
    return userProperty;
}
</code></pre><h3 id="总结配置类型"><a href="#总结配置类型" class="headerlink" title="总结配置类型"></a>总结配置类型</h3><p>1.值类型，就是直接冒号后面加<br>2.map是写成{key1: value1, key2: value2} ,里面也是值的类型<br>3.List 是写成 ：</p>
<pre><code>list:
  - lzl
  - wzh
  - zgr
</code></pre><p>4.bean 也就是嵌套而已。</p>
<p><strong>配置文件处理器</strong><br>导入这个依赖，使用@ConfiurationProperties注解生成的配置的类，在配置文件中配置就会有提示，但是要启动一次。</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;
</code></pre><h3 id="PropertySource（导入properties配置文件）"><a href="#PropertySource（导入properties配置文件）" class="headerlink" title="PropertySource（导入properties配置文件）"></a>PropertySource（导入properties配置文件）</h3><h3 id="ImportResource（导入spring配置文件）"><a href="#ImportResource（导入spring配置文件）" class="headerlink" title="ImportResource（导入spring配置文件）"></a>ImportResource（导入spring配置文件）</h3><p>主方法上加即可：</p>
<pre><code>@SpringBootApplication
@PropertySource(&quot;classpath:abc.properties&quot;)
@ImportResource(&quot;classpath:Spring.xml&quot;)
public class Demo1Application {
    public static void main(String[] args) {
        SpringApplication.run(Demo1Application.class, args);
    }
}
</code></pre><h3 id="Profile"><a href="#Profile" class="headerlink" title="Profile"></a>Profile</h3><p><strong>多配置文件</strong><br>application.yml通过—分割</p>
<pre><code>#application.properties
spring:
  profiles:
    active: beta,linux
server:
  servlet:
    context-path: /demo3
---
#application-alpha.properties
spring:
  profiles: alpha
server:
  port: 8081
---
spring:
  profiles: beta
server:
  port: 8082
</code></pre><p><strong>配置文件的优先级</strong></p>
<pre><code>-file:./config/
-file:./
-classpath:/config/
-classpath:/
指定spring.config.location
</code></pre><h3 id="整合web"><a href="#整合web" class="headerlink" title="整合web"></a>整合web</h3><p><strong>自己配置Servlet</strong></p>
<pre><code>public class HelloServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        resp.getWriter().append(&quot;hello sb servlet&quot;);
    }
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</code></pre><p><strong>自己配置Filter</strong></p>
<pre><code>public class HelloFilter implements Filter {
    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        System.out.println(&quot;this is my filter&quot;);
        filterChain.doFilter(servletRequest, servletResponse);
    }
}
</code></pre><p><strong>自己配置listener</strong></p>
<pre><code>@Component
public class HelloListener implements ServletContextListener {
    @Override
    public void contextInitialized(ServletContextEvent sce) {
        System.out.println(&quot;listener init&quot;);
    }
}

@Configuration
public class MvcConfig implements WebMvcConfigurer {
</code></pre><p>//自己配置的servlet</p>
<pre><code>@Bean
public ServletRegistrationBean registrationBean(){
    return new ServletRegistrationBean(new HelloServlet(),&quot;/servlet2&quot;);
}
</code></pre><p>//自己配置的filter 千万不要这样写！这样写会挡住静态文件</p>
<pre><code>    @Bean
    public FilterRegistrationBean filterRegistrationBean(){
        FilterRegistrationBean&lt;Filter&gt; filterRegistrationBean = new FilterRegistrationBean&lt;&gt;();
        filterRegistrationBean.setFilter(new HelloFilter());
        ArrayList&lt;String&gt; urlPatterns = new ArrayList&lt;&gt;();
        urlPatterns.add(&quot;/*&quot;);
        filterRegistrationBean.setUrlPatterns(urlPatterns);
        return filterRegistrationBean;
    }
}
</code></pre><p>在主文件引入servlet扫描：@ServletComponentScan</p>
<pre><code>@SpringBootApplication
@ServletComponentScan
public class Demoa5Application {
    public static void main(String[] args) {
        SpringApplication.run(Demoa5Application.class, args);
    }
}
</code></pre><h3 id="SpringBoot中使用freemarker"><a href="#SpringBoot中使用freemarker" class="headerlink" title="SpringBoot中使用freemarker"></a>SpringBoot中使用freemarker</h3><p>导包：</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre><p>配置：(默认配置)</p>
<pre><code>#spring.freemarker.template-loader-path=classpath:/templates/
#spring.freemarker.suffix=.ftl
#取决于你的自动配置类→ConfigurationProperties（prefix+成员变量）
</code></pre><h3 id="整合mybatis"><a href="#整合mybatis" class="headerlink" title="整合mybatis"></a>整合mybatis</h3><p>1.添加依赖</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;version&gt;5.1.47&lt;/version&gt;
    &lt;scope&gt;runtime&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre><p>2.配置数据源<br>springboot有默认的数据源（hikari）我们可以直接配置四大项，或者自己配置数据源要导包</p>
<pre><code>#数据源
#扫描包
spring:
  datasource:
    driver-class-name: com.mysql.jdbc.Driver
    url: jdbc:mysql://localhost:3306/j16_db?useUnicode=true&amp;characterEncoding=utf-8
    password: 123456
    username: root
    type: com.alibaba.druid.pool.DruidDataSource
</code></pre><p>3.主方法注解：@MapperScan(basePackages = “com.cskaoyan.mapper”)</p>
<pre><code>@SpringBootApplication
@MapperScan(basePackages = &quot;com.cskaoyan.mapper&quot;)
public class Demo7Application {
    public static void main(String[] args) {
        SpringApplication.run(Demo7Application.class, args);
    }
}
</code></pre><p>剩下的用法就和我们在ssm使用的是一样的。</p>
<p>4.Mapper文件的位置<br>Mapper映射文件必须放在resource目录下（默认情况下），且于Dao完全相同的的文件夹和文件名（后缀不同）。</p>
<h3 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h3><p>配置日志在配置文件中直接配置，这里表示文件目录需要答应日志</p>
<pre><code>logging:
  path: /spring/log
  level:
    com:
      cskaoyan:
        mapper: debug
</code></pre><p>自己使用：</p>
<pre><code>Logger logger = LoggerFactory.getLogger(HelloController.class);
</code></pre><h2 id="星期六（9月28）"><a href="#星期六（9月28）" class="headerlink" title="星期六（9月28）"></a>星期六（9月28）</h2><p>今天使用springboot重构之前的项目，但是发现还是有点力不从心。</p>
<h2 id="星期日（9月29日）"><a href="#星期日（9月29日）" class="headerlink" title="星期日（9月29日）"></a>星期日（9月29日）</h2><p>今天讲的是GIT and GitHub</p>
<h3 id="GIT"><a href="#GIT" class="headerlink" title="GIT"></a>GIT</h3><p>版本控制工具，之前就有用过，这里一张图更直观的感受一下git<br><a href="https://imgchr.com/i/uw2NnS" target="_blank" rel="external"><img src="https://s2.ax1x.com/2019/10/03/uw2NnS.png" alt="uw2NnS.png"></a></p>
<h3 id="Git-命令"><a href="#Git-命令" class="headerlink" title="Git 命令"></a>Git 命令</h3><p>3.1 Git init(初始化仓库)</p>
<pre><code>git init –bare 仓库名
git init
</code></pre><p>3.2 git clone 远程仓库地址<br>从远程仓库拉取一个仓库下来作为本地仓库<br>是最常用获取远程仓库的方式<br>    git clone + url</p>
<p>3.3 git status 查看当前git的状态很常用</p>
<pre><code>git status
</code></pre><p>如果本地的工作区有修改的代码，git会报红色，如果提交到暂存区之后，status会显示绿色，提交到本地仓库，将会显示已提交到仓库。</p>
<p>3.4 git add 文件名</p>
<pre><code>git add . 提交当前文件夹下的全部文件  最常用
git add src/*
</code></pre><p>可以通过git status查看代码提交到暂存区的状态<br>3.5 git commit –m “消息”</p>
<pre><code>git commit –m “消息”
</code></pre><p>提交到本地仓库的信息，提交的时间，也就是github上显示的时间。</p>
<p>3.6 git push<br>将本地仓库的修改提交到远程仓库</p>
<pre><code>git push
</code></pre><p>3.7 git pull从远程仓库拉取最新的更新</p>
<pre><code>git pull
</code></pre><p>3.8 git Config 需要配置邮箱和用户名<br>在第一次commit之前</p>
<pre><code>1、  通过命令修改 git config –global user.name(email) 值
2、  修改user目录下的.gitconfig文件
</code></pre><p><strong>注意事项</strong> 在user目录下创建.gitconfig文件夹使用命令行：</p>
<pre><code>touch .gitconfig
</code></pre><p>3.9 git log<br>提交日志<br>包含版本号(完整) 提交用户信息 和提交的message</p>
<pre><code>git log
</code></pre><p>查看版本号，方便进行回滚，但是这不是正常的操作，一般解决冲突即可</p>
<p>3.10   git push的时候<br>需要github的登陆信息</p>
<pre><code>git push
</code></pre><p>3.11  git reset（谨慎操作）</p>
<pre><code>git reset –hard 版本号（相较于下面两个更常用）
git reset –hard HEAD^ 回退一个版本
git reset –hard HEAD~n 回退n个版本
</code></pre><p>3.12  删除</p>
<pre><code>文件的删除git rm
修改的撤销：撤销的是工作区还未提交到暂存区的部分git checkout 文件名（谨慎操作）
</code></pre><p><strong>注意</strong>工作区checkout之后就找不到了</p>
<p>3.13  冲突解决<br>多个用户维护同一部分的代码时发生冲突。<br><strong>冲突发生的情况：</strong>后提交代码到远程仓库的的程序员，会出现冲突，需要解决。<br>解决冲突的步骤：<br>1.首先git add.  git commit -m ‘’ 把你的代码上传到你本地的仓库。<br>目的就是为了在你解决冲突的时候，还可以找回冲突的代码。<br>2.然后把github上的代码pull下来，<strong>此时你的仓库就会变成merge的状态，通过brachName/merge得知。此时服务器上最新的代码已经pull到你的本地了</strong><br>3.然后修改冲突代码，本地运行成功之后， 重新add commit push 即可</p>
<h3 id="4-文件忽略的配置"><a href="#4-文件忽略的配置" class="headerlink" title="4 文件忽略的配置"></a>4 文件忽略的配置</h3><p>我们有一些文件不想上传到仓库（本地或者远程仓库），我们可以配置一下.gitignore文件</p>
<pre><code>HELP.md
target/    //把生成的class文件加入忽略文件中
.gitignore //把自己加入到忽略文件中
</code></pre><p><strong>注意</strong>在我们使用idea创建了一个springboot的项目的之后。我们自动生成了一个.gitignore的文件。这个文件里面是没有把自己加入到。所以默认这个文件是会被放在github上的。</p>
<h3 id="分支"><a href="#分支" class="headerlink" title="分支"></a>分支</h3><p>6.1 查看分支<br>    Git branch -a</p>
<p>6.2 切换分支<br>    Git checkout 分支名<br><strong>注意</strong>切换分支之后，这里会进入到linux的编辑器 直接：q退出即可。</p>
<p>6.3 创建分支</p>
<pre><code>Git checkout 新的分支名
Git checkout –b 分支名
</code></pre><p>6.4 分支的合并<br>比如说我们现在做的是dev要合并到master上</p>
<pre><code>1、  切换到master分支上
2、  在master上合并dev，
git merge dev
3、  （解决冲突）提交git push
</code></pre>
    </div>

    
    
    
        
      

      <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2019/09/22/jdbcTemplate使用总结/" rel="next" title="jdbcTemplate使用总结">
                  <i class="fa fa-chevron-left"></i> jdbcTemplate使用总结
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2019/10/07/Java总结（十五）/" rel="prev" title="Java总结（十五）">
                  Java总结（十五） <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          
    
    <div class="comments" id="comments"></div>
  

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#星期一（9月23）"><span class="nav-number">1.</span> <span class="nav-text">星期一（9月23）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-Mybatis入门案例2"><span class="nav-number">1.1.</span> <span class="nav-text">1 Mybatis入门案例2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-Mybatis配置文件"><span class="nav-number">1.2.</span> <span class="nav-text">2 Mybatis配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#log4j"><span class="nav-number">1.3.</span> <span class="nav-text">log4j</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#简单说明"><span class="nav-number">1.4.</span> <span class="nav-text">简单说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#日志级别"><span class="nav-number">1.5.</span> <span class="nav-text">日志级别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#日志格式（针对的是自定义日志PatternLayout）"><span class="nav-number">1.6.</span> <span class="nav-text">日志格式（针对的是自定义日志PatternLayout）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用"><span class="nav-number">1.7.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#日志分离小工具"><span class="nav-number">1.8.</span> <span class="nav-text">日志分离小工具</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#输入映射（重点）"><span class="nav-number">1.9.</span> <span class="nav-text">输入映射（重点）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-没有注解"><span class="nav-number">1.10.</span> <span class="nav-text">4.1 没有注解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-使用注解来输入映射"><span class="nav-number">1.11.</span> <span class="nav-text">4.2 使用注解来输入映射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-输出映射（重点）"><span class="nav-number">1.12.</span> <span class="nav-text">5.输出映射（重点）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-简单类型"><span class="nav-number">1.13.</span> <span class="nav-text">5.1 简单类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-Pojo类型"><span class="nav-number">1.14.</span> <span class="nav-text">5.2 Pojo类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-List或者数组"><span class="nav-number">1.15.</span> <span class="nav-text">5.3 List或者数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-resultMap"><span class="nav-number">1.16.</span> <span class="nav-text">5.4 resultMap</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#星期二（9月24）"><span class="nav-number">2.</span> <span class="nav-text">星期二（9月24）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Sql标签以及动态sql"><span class="nav-number">2.1.</span> <span class="nav-text">Sql标签以及动态sql</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-Where标签"><span class="nav-number">2.2.</span> <span class="nav-text">1.1 Where标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-If"><span class="nav-number">2.3.</span> <span class="nav-text">1.2 If</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-Trim"><span class="nav-number">2.4.</span> <span class="nav-text">1.3 Trim</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-Choose-when"><span class="nav-number">2.5.</span> <span class="nav-text">1.4 Choose when</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-Sql"><span class="nav-number">2.6.</span> <span class="nav-text">1.5 Sql</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-SelectKey"><span class="nav-number">2.7.</span> <span class="nav-text">1.6 SelectKey</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-7Foreach"><span class="nav-number">2.8.</span> <span class="nav-text">1.7Foreach</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多表查询"><span class="nav-number">2.9.</span> <span class="nav-text">多表查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-一对一"><span class="nav-number">2.10.</span> <span class="nav-text">2.1 一对一</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-1-Javabean关系维护"><span class="nav-number">2.11.</span> <span class="nav-text">2.1.1   Javabean关系维护</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-2表关系维护"><span class="nav-number">2.12.</span> <span class="nav-text">2.1.2表关系维护</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-3执行查询（重点）"><span class="nav-number">2.13.</span> <span class="nav-text">2.1.3执行查询（重点）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-3-1-分次查询"><span class="nav-number">2.14.</span> <span class="nav-text">2.1.3.1 分次查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-3-2-连接查询"><span class="nav-number">2.15.</span> <span class="nav-text">2.1.3.2 连接查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-一对多"><span class="nav-number">2.16.</span> <span class="nav-text">2.2 一对多</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-Javabean关系维护"><span class="nav-number">2.17.</span> <span class="nav-text">.2.1   Javabean关系维护</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-2-表关系维护"><span class="nav-number">2.18.</span> <span class="nav-text">2.2.2   表关系维护</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注意事项"><span class="nav-number">2.19.</span> <span class="nav-text">注意事项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-3-执行查询"><span class="nav-number">2.20.</span> <span class="nav-text">2.2.3   执行查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-3-1-分次查询"><span class="nav-number">2.21.</span> <span class="nav-text">2.2.3.1 分次查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-3-2-连接查询"><span class="nav-number">2.22.</span> <span class="nav-text">2.2.3.2 连接查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多对多"><span class="nav-number">2.23.</span> <span class="nav-text">多对多</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Javabean关系维护"><span class="nav-number">2.24.</span> <span class="nav-text">Javabean关系维护</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表关系维护"><span class="nav-number">2.25.</span> <span class="nav-text">表关系维护</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#执行查询"><span class="nav-number">2.26.</span> <span class="nav-text">执行查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分次查询"><span class="nav-number">2.27.</span> <span class="nav-text">分次查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#连接查询"><span class="nav-number">2.28.</span> <span class="nav-text">连接查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Limit"><span class="nav-number">2.29.</span> <span class="nav-text">Limit</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#星期三（9月25）"><span class="nav-number">3.</span> <span class="nav-text">星期三（9月25）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Orm层的优化"><span class="nav-number">3.1.</span> <span class="nav-text">Orm层的优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-懒加载"><span class="nav-number">3.2.</span> <span class="nav-text">1.1 懒加载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-缓存"><span class="nav-number">3.3.</span> <span class="nav-text">1.2 缓存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Alias"><span class="nav-number">3.4.</span> <span class="nav-text">Alias</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用注解替代部分标签"><span class="nav-number">3.5.</span> <span class="nav-text">使用注解替代部分标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#逆向工程mybatis-generator"><span class="nav-number">3.6.</span> <span class="nav-text">逆向工程mybatis generator</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#星期四（9月26）"><span class="nav-number">4.</span> <span class="nav-text">星期四（9月26）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#星期四（0926）"><span class="nav-number">5.</span> <span class="nav-text">星期四（0926）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#demo1-实现spring-mybatis的整合"><span class="nav-number">5.1.</span> <span class="nav-text">demo1: 实现spring + mybatis的整合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#demo2-实现spring-springMVC-mybatis整合"><span class="nav-number">5.2.</span> <span class="nav-text">demo2: 实现spring + springMVC + mybatis整合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#demo3-ssm整合-spring和springMVC配置文件分开"><span class="nav-number">5.3.</span> <span class="nav-text">demo3: ssm整合 spring和springMVC配置文件分开</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#demo4-使用javaConfig进行配置"><span class="nav-number">5.4.</span> <span class="nav-text">demo4: 使用javaConfig进行配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#星期五（9月27）"><span class="nav-number">6.</span> <span class="nav-text">星期五（9月27）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-1-Properteies配置"><span class="nav-number">6.1.</span> <span class="nav-text">3.3.1 Properteies配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-2-Yml配置"><span class="nav-number">6.2.</span> <span class="nav-text">3.3.2 Yml配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Yaml基本语法"><span class="nav-number">6.3.</span> <span class="nav-text">Yaml基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-3-高级用法（Property也支持）"><span class="nav-number">6.4.</span> <span class="nav-text">3.3.3 高级用法（Property也支持）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#总结配置类型"><span class="nav-number">6.5.</span> <span class="nav-text">总结配置类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PropertySource（导入properties配置文件）"><span class="nav-number">6.6.</span> <span class="nav-text">PropertySource（导入properties配置文件）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ImportResource（导入spring配置文件）"><span class="nav-number">6.7.</span> <span class="nav-text">ImportResource（导入spring配置文件）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Profile"><span class="nav-number">6.8.</span> <span class="nav-text">Profile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#整合web"><span class="nav-number">6.9.</span> <span class="nav-text">整合web</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpringBoot中使用freemarker"><span class="nav-number">6.10.</span> <span class="nav-text">SpringBoot中使用freemarker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#整合mybatis"><span class="nav-number">6.11.</span> <span class="nav-text">整合mybatis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#日志"><span class="nav-number">6.12.</span> <span class="nav-text">日志</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#星期六（9月28）"><span class="nav-number">7.</span> <span class="nav-text">星期六（9月28）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#星期日（9月29日）"><span class="nav-number">8.</span> <span class="nav-text">星期日（9月29日）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#GIT"><span class="nav-number">8.1.</span> <span class="nav-text">GIT</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Git-命令"><span class="nav-number">8.2.</span> <span class="nav-text">Git 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-文件忽略的配置"><span class="nav-number">8.3.</span> <span class="nav-text">4 文件忽略的配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分支"><span class="nav-number">8.4.</span> <span class="nav-text">分支</span></a></li></ol></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/head.jpeg"
      alt="王邸">
  <p class="site-author-name" itemprop="name">王邸</p>
  <div class="site-description" itemprop="description"></div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">标签</span>
        
      </div>
    
  </nav>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">王邸</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.3.8</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.4.0</div>

        












        
      </div>
    </footer>
  </div>

  


  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.0"></script><script src="/js/motion.js?v=7.4.0"></script>
<script src="/js/schemes/pisces.js?v=7.4.0"></script>

<script src="/js/next-boot.js?v=7.4.0"></script>



  





















  

  

  


<script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'Fn4BuvoixOxjJAhR79TvaD5M-gzGzoHsz',
    appKey: '1uspTrSwPqkmSBSUr948WqxE',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: true,
    lang: '' || 'zh-cn',
    path: location.pathname
  });
}, window.Valine);
</script>

</body>
</html>
